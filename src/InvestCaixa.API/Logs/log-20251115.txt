2025-11-15 00:01:31.640 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync(CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\UnitOfWork.cs:line 29
   at InvestCaixa.Application.Services.SimulacaoService.SimularInvestimentoAsync(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 59
   at InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 38
   at lambda_method41(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-15 00:01:31.680 -03:00 [ERR] Ocorreu uma exceção: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync(CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\UnitOfWork.cs:line 29
   at InvestCaixa.Application.Services.SimulacaoService.SimularInvestimentoAsync(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 59
   at InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 38
   at lambda_method41(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-15 00:01:31.705 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - 500 null application/json; charset=utf-8 252460.8571ms
2025-11-15 00:01:36.920 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 84
2025-11-15 00:01:36.928 -03:00 [INF] CORS policy execution successful.
2025-11-15 00:01:36.931 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-15 00:01:36.933 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-15 00:01:36.948 -03:00 [INF] Recebida requisição de simulação para cliente 123
2025-11-15 00:01:36.951 -03:00 [INF] Iniciando simulação para cliente 123 com valor 50000
2025-11-15 00:01:36.957 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tipoProduto_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
FROM "Produtos" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."Tipo" = @__tipoProduto_0
LIMIT 1
2025-11-15 00:01:36.967 -03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Guid), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Simulacoes" ("Id", "ClienteId", "CreatedAt", "DataSimulacao", "IsDeleted", "PrazoMeses", "ProdutoId", "RentabilidadeCalculada", "UpdatedAt", "ValorFinal", "ValorInvestido")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-15 00:01:36.979 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'InvestCaixa.Infrastructure.Data.InvestimentoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-15 00:02:24.852 -03:00 [INF] Executed DbCommand (43ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-15 00:02:25.375 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-15 00:02:25.660 -03:00 [INF] Application started successfully
2025-11-15 00:02:25.780 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-15 00:02:26.226 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-15 00:02:26.229 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-15 00:02:26.681 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-15 00:02:26.683 -03:00 [INF] Hosting environment: Development
2025-11-15 00:02:26.686 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-15 00:02:32.793 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - null null
2025-11-15 00:02:32.793 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_vs/browserLink - null null
2025-11-15 00:02:32.897 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 118.4574ms
2025-11-15 00:02:32.990 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_vs/browserLink - 200 null text/javascript; charset=UTF-8 213.3539ms
2025-11-15 00:02:33.111 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - null null
2025-11-15 00:02:33.224 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 121.3318ms
2025-11-15 00:02:51.248 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 52
2025-11-15 00:02:51.415 -03:00 [INF] CORS policy execution successful.
2025-11-15 00:02:51.426 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-15 00:02:51.472 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-15 00:02:51.569 -03:00 [INF] Tentativa de login para usuário admin
2025-11-15 00:02:51.574 -03:00 [INF] Processando login para usuário admin
2025-11-15 00:02:51.643 -03:00 [INF] Login bem-sucedido para usuário admin
2025-11-15 00:02:51.660 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.LoginResponse'.
2025-11-15 00:02:51.691 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 204.7563ms
2025-11-15 00:02:51.696 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-15 00:02:51.701 -03:00 [INF] Request POST /api/Auth/login completado em 276ms com status 200
2025-11-15 00:02:51.711 -03:00 [INF] HTTP POST /api/Auth/login responded 200 in 415.0520 ms
2025-11-15 00:02:51.720 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 200 null application/json; charset=utf-8 471.8526ms
2025-11-15 00:04:02.497 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 81
2025-11-15 00:04:02.629 -03:00 [INF] CORS policy execution successful.
2025-11-15 00:04:02.632 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-15 00:04:02.642 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-15 00:04:02.839 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-15 00:04:02.927 -03:00 [INF] Recebida requisição de simulação para cliente 1
2025-11-15 00:04:02.934 -03:00 [INF] Iniciando simulação para cliente 1 com valor 5000
2025-11-15 00:04:08.124 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__tipoProduto_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
FROM "Produtos" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."Tipo" = @__tipoProduto_0
LIMIT 1
2025-11-15 00:05:48.054 -03:00 [INF] Executed DbCommand (34ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Guid), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Simulacoes" ("Id", "ClienteId", "CreatedAt", "DataSimulacao", "IsDeleted", "PrazoMeses", "ProdutoId", "RentabilidadeCalculada", "UpdatedAt", "ValorFinal", "ValorInvestido")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-15 00:05:51.071 -03:00 [INF] Simulação concluída. Valor inicial: 5000, Valor final: 5980.73737843330000
2025-11-15 00:05:56.539 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.SimulacaoResponse'.
2025-11-15 00:06:07.972 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API) in 125295.8779ms
2025-11-15 00:06:07.977 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-15 00:06:26.829 -03:00 [INF] Request POST /api/Simulacao/simular-investimento completado em 129213ms com status 200
2025-11-15 00:06:29.324 -03:00 [INF] HTTP POST /api/Simulacao/simular-investimento responded 200 in 146809.1915 ms
2025-11-15 00:06:30.824 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - 200 null application/json; charset=utf-8 148327.2221ms
