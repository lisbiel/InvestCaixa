2025-11-16 10:42:55.361 -03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-16 10:42:55.585 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-16 10:42:55.804 -03:00 [INF] Application started successfully
2025-11-16 10:42:55.853 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 10:42:56.206 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-16 10:42:56.208 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-16 10:42:56.344 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 10:42:56.346 -03:00 [INF] Hosting environment: Development
2025-11-16 10:42:56.348 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-16 10:44:06.140 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/index.html - null null
2025-11-16 10:44:06.448 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/index.html - 200 null text/html;charset=utf-8 317.5521ms
2025-11-16 10:44:06.516 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/swagger-ui.css - null null
2025-11-16 10:44:06.518 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/swagger-ui-bundle.js - null null
2025-11-16 10:44:06.516 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/index.css - null null
2025-11-16 10:44:06.530 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/index.js - null null
2025-11-16 10:44:06.530 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/swagger-ui-standalone-preset.js - null null
2025-11-16 10:44:06.610 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/index.js - 200 null application/javascript;charset=utf-8 80.0722ms
2025-11-16 10:44:06.542 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 10:44:06.627 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/index.css - 200 152 text/css 111.5687ms
2025-11-16 10:44:06.557 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_vs/browserLink - null null
2025-11-16 10:44:06.657 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/swagger-ui.css - 200 23649 text/css 141.4953ms
2025-11-16 10:44:06.666 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 124.5586ms
2025-11-16 10:44:06.671 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/swagger-ui-bundle.js - 200 424834 text/javascript 153.1054ms
2025-11-16 10:44:06.661 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/swagger-ui-standalone-preset.js - 200 77354 text/javascript 130.5656ms
2025-11-16 10:44:06.831 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_vs/browserLink - 200 null text/javascript; charset=UTF-8 275.8996ms
2025-11-16 10:44:06.980 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - null null
2025-11-16 10:44:07.015 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.623ms
2025-11-16 10:44:20.443 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 48
2025-11-16 10:44:20.644 -03:00 [INF] CORS policy execution successful.
2025-11-16 10:44:20.653 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-16 10:44:20.699 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-16 10:44:20.829 -03:00 [INF] Tentativa de login para usuário admin
2025-11-16 10:44:20.834 -03:00 [INF] Processando login para usuário admin
2025-11-16 10:44:20.897 -03:00 [INF] Login bem-sucedido para usuário admin
2025-11-16 10:44:20.915 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.LoginResponse'.
2025-11-16 10:44:20.939 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 229.8131ms
2025-11-16 10:44:20.942 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-16 10:44:20.947 -03:00 [INF] Request POST /api/Auth/login completado em 294ms com status 200
2025-11-16 10:44:20.955 -03:00 [INF] HTTP POST /api/Auth/login responded 200 in 493.4465 ms
2025-11-16 10:44:20.961 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 200 null application/json; charset=utf-8 518.8712ms
2025-11-16 10:45:03.552 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/perfil-risco/1 - null null
2025-11-16 10:45:03.650 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API)'
2025-11-16 10:45:03.657 -03:00 [INF] Route matched with {action = "ObterPerfilRisco", controller = "PerfilRisco"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.PerfilRiscoResponse]] ObterPerfilRisco(Int32, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.PerfilRiscoController (InvestCaixa.API).
2025-11-16 10:45:03.792 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-16 10:45:03.800 -03:00 [INF] Obtendo perfil de risco para cliente 1
2025-11-16 10:45:03.975 -03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CPF", "c"."CreatedAt", "c"."DataNascimento", "c"."Email", "c"."IsDeleted", "c"."Nome", "c"."PerfilAtual", "c"."UpdatedAt"
FROM "Clientes" AS "c"
WHERE NOT ("c"."IsDeleted") AND "c"."Id" = @__p_0
LIMIT 1
2025-11-16 10:45:04.090 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clienteId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."ClienteId", "p"."CreatedAt", "p"."Descricao", "p"."FrequenciaMovimentacoes", "p"."IsDeleted", "p"."Perfil", "p"."Pontuacao", "p"."PrefereLiquidez", "p"."UpdatedAt", "p"."VolumeInvestimentos"
FROM "PerfisRisco" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."ClienteId" = @__clienteId_0
LIMIT 1
2025-11-16 10:45:04.189 -03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@__clienteId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."ClienteId", "s"."CreatedAt", "s"."DataSimulacao", "s"."IsDeleted", "s"."PrazoMeses", "s"."ProdutoId", "s"."ProdutoSimulado", "s"."RentabilidadeCalculada", "s"."UpdatedAt", "s"."ValorFinal", "s"."ValorInvestido", "t"."Id", "t"."CreatedAt", "t"."IsDeleted", "t"."Nome", "t"."PerfilRecomendado", "t"."PermiteLiquidez", "t"."PrazoMinimoDias", "t"."Rentabilidade", "t"."Risco", "t"."Tipo", "t"."UpdatedAt", "t"."ValorMinimoAplicacao", "t0"."Id", "t0"."CPF", "t0"."CreatedAt", "t0"."DataNascimento", "t0"."Email", "t0"."IsDeleted", "t0"."Nome", "t0"."PerfilAtual", "t0"."UpdatedAt"
FROM "Simulacoes" AS "s"
INNER JOIN (
    SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
    FROM "Produtos" AS "p"
    WHERE NOT ("p"."IsDeleted")
) AS "t" ON "s"."ProdutoId" = "t"."Id"
INNER JOIN (
    SELECT "c"."Id", "c"."CPF", "c"."CreatedAt", "c"."DataNascimento", "c"."Email", "c"."IsDeleted", "c"."Nome", "c"."PerfilAtual", "c"."UpdatedAt"
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted")
) AS "t0" ON "s"."ClienteId" = "t0"."Id"
WHERE NOT ("s"."IsDeleted") AND "s"."ClienteId" = @__clienteId_0
ORDER BY "s"."DataSimulacao" DESC
2025-11-16 10:45:04.237 -03:00 [ERR] An exception occurred while iterating over the results of a query for context type 'InvestCaixa.Infrastructure.Data.InvestimentoDbContext'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such column: s.ProdutoSimulado'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such column: s.ProdutoSimulado'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
2025-11-16 10:45:04.399 -03:00 [INF] Executed action InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API) in 738.8013ms
2025-11-16 10:45:04.403 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API)'
2025-11-16 10:45:04.427 -03:00 [INF] Request GET /api/perfil-risco/1 completado em 776ms com status 200
2025-11-16 10:45:04.432 -03:00 [ERR] HTTP GET /api/perfil-risco/1 responded 500 in 861.0684 ms
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such column: s.ProdutoSimulado'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.SimulacaoRepository.ObterPorClienteAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\SimulacaoRepository.cs:line 18
   at InvestCaixa.Application.Services.PerfilRiscoService.CalcularPerfilInicialAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 67
   at InvestCaixa.Application.Services.PerfilRiscoService.ObterPerfilRiscoAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 45
   at InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfilRiscoController.cs:line 35
   at lambda_method35(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-16 10:45:04.459 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such column: s.ProdutoSimulado'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.SimulacaoRepository.ObterPorClienteAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\SimulacaoRepository.cs:line 18
   at InvestCaixa.Application.Services.PerfilRiscoService.CalcularPerfilInicialAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 67
   at InvestCaixa.Application.Services.PerfilRiscoService.ObterPerfilRiscoAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 45
   at InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfilRiscoController.cs:line 35
   at lambda_method35(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 10:45:04.483 -03:00 [ERR] Ocorreu uma exceção: SQLite Error 1: 'no such column: s.ProdutoSimulado'.
Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such column: s.ProdutoSimulado'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.InitializeReaderAsync(AsyncEnumerator enumerator, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.SingleQueryingEnumerable`1.AsyncEnumerator.MoveNextAsync()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.SimulacaoRepository.ObterPorClienteAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\SimulacaoRepository.cs:line 18
   at InvestCaixa.Application.Services.PerfilRiscoService.CalcularPerfilInicialAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 67
   at InvestCaixa.Application.Services.PerfilRiscoService.ObterPerfilRiscoAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 45
   at InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfilRiscoController.cs:line 35
   at lambda_method35(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 10:45:04.525 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/perfil-risco/1 - 500 null application/json; charset=utf-8 973.7286ms
2025-11-16 10:46:45.939 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-11-16 10:46:46.303 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Clientes" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Clientes" PRIMARY KEY AUTOINCREMENT,
    "Nome" TEXT NOT NULL,
    "Email" TEXT NOT NULL,
    "CPF" TEXT NOT NULL,
    "DataNascimento" TEXT NOT NULL,
    "PerfilAtual" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL
);
2025-11-16 10:46:46.307 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Produtos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Produtos" PRIMARY KEY,
    "Nome" TEXT NOT NULL,
    "Tipo" INTEGER NOT NULL,
    "Rentabilidade" TEXT NOT NULL,
    "Risco" INTEGER NOT NULL,
    "PrazoMinimoDias" INTEGER NOT NULL,
    "ValorMinimoAplicacao" TEXT NOT NULL,
    "PermiteLiquidez" INTEGER NOT NULL,
    "PerfilRecomendado" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL
);
2025-11-16 10:46:46.312 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PerfisRisco" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_PerfisRisco" PRIMARY KEY,
    "ClienteId" INTEGER NOT NULL,
    "Perfil" INTEGER NOT NULL,
    "Pontuacao" INTEGER NOT NULL,
    "Descricao" TEXT NOT NULL,
    "VolumeInvestimentos" TEXT NOT NULL,
    "FrequenciaMovimentacoes" INTEGER NOT NULL,
    "PrefereLiquidez" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_PerfisRisco_Clientes_ClienteId" FOREIGN KEY ("ClienteId") REFERENCES "Clientes" ("Id") ON DELETE CASCADE
);
2025-11-16 10:46:46.316 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Simulacoes" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Simulacoes" PRIMARY KEY,
    "ClienteId" INTEGER NOT NULL,
    "ProdutoSimulado" TEXT NOT NULL,
    "ProdutoId" TEXT NOT NULL,
    "ValorInvestido" TEXT NOT NULL,
    "ValorFinal" TEXT NOT NULL,
    "PrazoMeses" INTEGER NOT NULL,
    "DataSimulacao" TEXT NOT NULL,
    "RentabilidadeCalculada" TEXT NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_Simulacoes_Clientes_ClienteId" FOREIGN KEY ("ClienteId") REFERENCES "Clientes" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Simulacoes_Produtos_ProdutoId" FOREIGN KEY ("ProdutoId") REFERENCES "Produtos" ("Id") ON DELETE RESTRICT
);
2025-11-16 10:46:46.320 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES ('12FAAF6F-211D-49FF-B74F-4BC87B9D3BC9', '2025-11-16 13:46:46.0756628', 0, 'LCI Plus', 1, 0, 90, '0.11', 1, 2, NULL, '5000.0');
SELECT changes();

INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES ('169053E2-AFFE-4536-9575-9882AAC8CCB6', '2025-11-16 13:46:46.0756614', 0, 'CDB Caixa 2026', 1, 1, 180, '0.12', 1, 1, NULL, '1000.0');
SELECT changes();

INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES ('D182947C-C26D-4AEA-9140-E0B41CE8EB47', '2025-11-16 13:46:46.0756631', 0, 'Fundo Multimercado XPTO', 3, 1, 0, '0.18', 3, 5, NULL, '500.0');
SELECT changes();
2025-11-16 10:46:46.323 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Clientes_CPF" ON "Clientes" ("CPF");
2025-11-16 10:46:46.328 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Clientes_Email" ON "Clientes" ("Email");
2025-11-16 10:46:46.331 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_PerfisRisco_ClienteId" ON "PerfisRisco" ("ClienteId");
2025-11-16 10:46:46.335 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_PerfisRisco_Perfil" ON "PerfisRisco" ("Perfil");
2025-11-16 10:46:46.339 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Produtos_PerfilRecomendado" ON "Produtos" ("PerfilRecomendado");
2025-11-16 10:46:46.344 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Produtos_Tipo" ON "Produtos" ("Tipo");
2025-11-16 10:46:46.347 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Simulacoes_ClienteId" ON "Simulacoes" ("ClienteId");
2025-11-16 10:46:46.350 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Simulacoes_DataSimulacao" ON "Simulacoes" ("DataSimulacao");
2025-11-16 10:46:46.354 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Simulacoes_ProdutoId" ON "Simulacoes" ("ProdutoId");
2025-11-16 10:46:46.607 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-16 10:46:46.618 -03:00 [INF] Seeding database with initial data...
2025-11-16 10:46:46.882 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 11), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 13), @p4='?' (DbType = Boolean), @p5='?' (Size = 10), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Clientes" ("CPF", "CreatedAt", "DataNascimento", "Email", "IsDeleted", "Nome", "PerfilAtual", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-11-16 10:46:46.912 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 14), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 10:46:46.917 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 18), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 10:46:46.921 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 18), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 10:46:46.925 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 8), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 10:46:46.929 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 19), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 10:46:46.957 -03:00 [INF] Database seeded successfully with 5 products and 1 client
2025-11-16 10:46:47.232 -03:00 [INF] Application started successfully
2025-11-16 10:46:47.285 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 10:46:47.593 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-16 10:46:47.595 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-16 10:46:47.944 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 10:46:47.946 -03:00 [INF] Hosting environment: Development
2025-11-16 10:46:47.948 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-16 10:50:37.317 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/perfil-risco/1 - null null
2025-11-16 10:50:37.637 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API)'
2025-11-16 10:50:37.681 -03:00 [INF] Route matched with {action = "ObterPerfilRisco", controller = "PerfilRisco"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.PerfilRiscoResponse]] ObterPerfilRisco(Int32, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.PerfilRiscoController (InvestCaixa.API).
2025-11-16 10:50:37.808 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-16 10:50:37.882 -03:00 [INF] Obtendo perfil de risco para cliente 1
2025-11-16 10:50:38.005 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CPF", "c"."CreatedAt", "c"."DataNascimento", "c"."Email", "c"."IsDeleted", "c"."Nome", "c"."PerfilAtual", "c"."UpdatedAt"
FROM "Clientes" AS "c"
WHERE NOT ("c"."IsDeleted") AND "c"."Id" = @__p_0
LIMIT 1
2025-11-16 10:50:38.034 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__clienteId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."ClienteId", "p"."CreatedAt", "p"."Descricao", "p"."FrequenciaMovimentacoes", "p"."IsDeleted", "p"."Perfil", "p"."Pontuacao", "p"."PrefereLiquidez", "p"."UpdatedAt", "p"."VolumeInvestimentos"
FROM "PerfisRisco" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."ClienteId" = @__clienteId_0
LIMIT 1
2025-11-16 10:50:38.136 -03:00 [INF] Executed DbCommand (24ms) [Parameters=[@__clienteId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."ClienteId", "s"."CreatedAt", "s"."DataSimulacao", "s"."IsDeleted", "s"."PrazoMeses", "s"."ProdutoId", "s"."ProdutoSimulado", "s"."RentabilidadeCalculada", "s"."UpdatedAt", "s"."ValorFinal", "s"."ValorInvestido", "t"."Id", "t"."CreatedAt", "t"."IsDeleted", "t"."Nome", "t"."PerfilRecomendado", "t"."PermiteLiquidez", "t"."PrazoMinimoDias", "t"."Rentabilidade", "t"."Risco", "t"."Tipo", "t"."UpdatedAt", "t"."ValorMinimoAplicacao", "t0"."Id", "t0"."CPF", "t0"."CreatedAt", "t0"."DataNascimento", "t0"."Email", "t0"."IsDeleted", "t0"."Nome", "t0"."PerfilAtual", "t0"."UpdatedAt"
FROM "Simulacoes" AS "s"
INNER JOIN (
    SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
    FROM "Produtos" AS "p"
    WHERE NOT ("p"."IsDeleted")
) AS "t" ON "s"."ProdutoId" = "t"."Id"
INNER JOIN (
    SELECT "c"."Id", "c"."CPF", "c"."CreatedAt", "c"."DataNascimento", "c"."Email", "c"."IsDeleted", "c"."Nome", "c"."PerfilAtual", "c"."UpdatedAt"
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted")
) AS "t0" ON "s"."ClienteId" = "t0"."Id"
WHERE NOT ("s"."IsDeleted") AND "s"."ClienteId" = @__clienteId_0
ORDER BY "s"."DataSimulacao" DESC
2025-11-16 10:50:38.210 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (Size = 68), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PerfisRisco" ("Id", "ClienteId", "CreatedAt", "Descricao", "FrequenciaMovimentacoes", "IsDeleted", "Perfil", "Pontuacao", "PrefereLiquidez", "UpdatedAt", "VolumeInvestimentos")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-16 10:50:38.235 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.PerfilRiscoResponse'.
2025-11-16 10:50:38.260 -03:00 [INF] Executed action InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API) in 569.4758ms
2025-11-16 10:50:38.263 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API)'
2025-11-16 10:50:38.267 -03:00 [INF] Request GET /api/perfil-risco/1 completado em 630ms com status 200
2025-11-16 10:50:38.273 -03:00 [INF] HTTP GET /api/perfil-risco/1 responded 200 in 870.2086 ms
2025-11-16 10:50:38.282 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/perfil-risco/1 - 200 null application/json; charset=utf-8 976.9041ms
2025-11-16 10:51:17.237 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/perfil-risco/2 - null null
2025-11-16 10:51:17.263 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API)'
2025-11-16 10:51:17.265 -03:00 [INF] Route matched with {action = "ObterPerfilRisco", controller = "PerfilRisco"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.PerfilRiscoResponse]] ObterPerfilRisco(Int32, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.PerfilRiscoController (InvestCaixa.API).
2025-11-16 10:51:17.275 -03:00 [INF] Obtendo perfil de risco para cliente 2
2025-11-16 10:51:17.363 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CPF", "c"."CreatedAt", "c"."DataNascimento", "c"."Email", "c"."IsDeleted", "c"."Nome", "c"."PerfilAtual", "c"."UpdatedAt"
FROM "Clientes" AS "c"
WHERE NOT ("c"."IsDeleted") AND "c"."Id" = @__p_0
LIMIT 1
2025-11-16 10:51:17.474 -03:00 [INF] Executed action InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API) in 203.7007ms
2025-11-16 10:51:17.478 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API)'
2025-11-16 10:51:17.508 -03:00 [INF] Request GET /api/perfil-risco/2 completado em 244ms com status 200
2025-11-16 10:51:17.513 -03:00 [ERR] HTTP GET /api/perfil-risco/2 responded 500 in 255.5948 ms
InvestCaixa.Domain.Exceptions.NotFoundException: Cliente 2 não encontrado
   at InvestCaixa.Application.Services.PerfilRiscoService.ObterPerfilRiscoAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 38
   at InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfilRiscoController.cs:line 35
   at lambda_method289(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-16 10:51:17.582 -03:00 [ERR] An unhandled exception has occurred while executing the request.
InvestCaixa.Domain.Exceptions.NotFoundException: Cliente 2 não encontrado
   at InvestCaixa.Application.Services.PerfilRiscoService.ObterPerfilRiscoAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 38
   at InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfilRiscoController.cs:line 35
   at lambda_method289(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 10:51:17.598 -03:00 [ERR] Ocorreu uma exceção: Cliente 2 não encontrado
InvestCaixa.Domain.Exceptions.NotFoundException: Cliente 2 não encontrado
   at InvestCaixa.Application.Services.PerfilRiscoService.ObterPerfilRiscoAsync(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 38
   at InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco(Int32 clienteId, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfilRiscoController.cs:line 35
   at lambda_method289(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 10:51:17.650 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/perfil-risco/2 - 404 null application/json; charset=utf-8 414.3514ms
2025-11-16 10:55:26.922 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/perfil-risco/produtos-recomendados/1 - null null
2025-11-16 10:55:26.962 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterProdutosRecomendados (InvestCaixa.API)'
2025-11-16 10:55:26.975 -03:00 [INF] Route matched with {action = "ObterProdutosRecomendados", controller = "PerfilRisco"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[InvestCaixa.Application.DTOs.Response.ProdutoResponse]]] ObterProdutosRecomendados(InvestCaixa.Domain.Enums.PerfilInvestidor, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.PerfilRiscoController (InvestCaixa.API).
2025-11-16 10:55:26.986 -03:00 [INF] Buscando produtos recomendados para perfil "Conservador"
2025-11-16 10:55:27.100 -03:00 [INF] Executed action InvestCaixa.API.Controllers.PerfilRiscoController.ObterProdutosRecomendados (InvestCaixa.API) in 120.9112ms
2025-11-16 10:55:27.104 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterProdutosRecomendados (InvestCaixa.API)'
2025-11-16 10:55:27.130 -03:00 [INF] Request GET /api/perfil-risco/produtos-recomendados/1 completado em 168ms com status 200
2025-11-16 10:55:27.136 -03:00 [ERR] HTTP GET /api/perfil-risco/produtos-recomendados/1 responded 500 in 203.7905 ms
System.NotSupportedException: SQLite does not support expressions of type 'decimal' in ORDER BY clauses. Convert the values to a supported type, or use LINQ to Objects to order the results on the client side.
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteQueryableMethodTranslatingExpressionVisitor.TranslateThenBy(ShapedQueryExpression source, LambdaExpression keySelector, Boolean ascending)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.ProdutoRepository.ObterPorPerfilAsync(PerfilInvestidor perfil, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\ProdutoRepository.cs:line 32
   at InvestCaixa.Application.Services.PerfilRiscoService.ObterProdutosRecomendadosAsync(PerfilInvestidor perfil, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 57
   at InvestCaixa.API.Controllers.PerfilRiscoController.ObterProdutosRecomendados(PerfilInvestidor perfil, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfilRiscoController.cs:line 48
   at lambda_method415(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-16 10:55:27.172 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: SQLite does not support expressions of type 'decimal' in ORDER BY clauses. Convert the values to a supported type, or use LINQ to Objects to order the results on the client side.
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteQueryableMethodTranslatingExpressionVisitor.TranslateThenBy(ShapedQueryExpression source, LambdaExpression keySelector, Boolean ascending)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.ProdutoRepository.ObterPorPerfilAsync(PerfilInvestidor perfil, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\ProdutoRepository.cs:line 32
   at InvestCaixa.Application.Services.PerfilRiscoService.ObterProdutosRecomendadosAsync(PerfilInvestidor perfil, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 57
   at InvestCaixa.API.Controllers.PerfilRiscoController.ObterProdutosRecomendados(PerfilInvestidor perfil, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfilRiscoController.cs:line 48
   at lambda_method415(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 10:55:27.188 -03:00 [ERR] Ocorreu uma exceção: SQLite does not support expressions of type 'decimal' in ORDER BY clauses. Convert the values to a supported type, or use LINQ to Objects to order the results on the client side.
System.NotSupportedException: SQLite does not support expressions of type 'decimal' in ORDER BY clauses. Convert the values to a supported type, or use LINQ to Objects to order the results on the client side.
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteQueryableMethodTranslatingExpressionVisitor.TranslateThenBy(ShapedQueryExpression source, LambdaExpression keySelector, Boolean ascending)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.ProdutoRepository.ObterPorPerfilAsync(PerfilInvestidor perfil, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\ProdutoRepository.cs:line 32
   at InvestCaixa.Application.Services.PerfilRiscoService.ObterProdutosRecomendadosAsync(PerfilInvestidor perfil, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\PerfilRiscoService.cs:line 57
   at InvestCaixa.API.Controllers.PerfilRiscoController.ObterProdutosRecomendados(PerfilInvestidor perfil, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfilRiscoController.cs:line 48
   at lambda_method415(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 10:55:27.204 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/perfil-risco/produtos-recomendados/1 - 500 null application/json; charset=utf-8 284.1913ms
2025-11-16 10:59:12.148 -03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-16 10:59:12.405 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-16 10:59:12.559 -03:00 [INF] Application started successfully
2025-11-16 10:59:12.599 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 10:59:12.871 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-16 10:59:12.873 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-16 10:59:13.144 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 10:59:13.146 -03:00 [INF] Hosting environment: Development
2025-11-16 10:59:13.147 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-16 10:59:23.827 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/perfil-risco/produtos-recomendados/1 - null null
2025-11-16 10:59:24.189 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterProdutosRecomendados (InvestCaixa.API)'
2025-11-16 10:59:24.231 -03:00 [INF] Route matched with {action = "ObterProdutosRecomendados", controller = "PerfilRisco"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[InvestCaixa.Application.DTOs.Response.ProdutoResponse]]] ObterProdutosRecomendados(InvestCaixa.Domain.Enums.PerfilInvestidor, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.PerfilRiscoController (InvestCaixa.API).
2025-11-16 10:59:24.396 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-16 10:59:24.442 -03:00 [INF] Buscando produtos recomendados para perfil "Conservador"
2025-11-16 10:59:24.577 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__perfil_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
FROM "Produtos" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."PerfilRecomendado" = @__perfil_0
ORDER BY "p"."Risco"
2025-11-16 10:59:24.630 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[InvestCaixa.Application.DTOs.Response.ProdutoResponse, InvestCaixa.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-16 10:59:24.661 -03:00 [INF] Executed action InvestCaixa.API.Controllers.PerfilRiscoController.ObterProdutosRecomendados (InvestCaixa.API) in 422.6363ms
2025-11-16 10:59:24.664 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterProdutosRecomendados (InvestCaixa.API)'
2025-11-16 10:59:24.668 -03:00 [INF] Request GET /api/perfil-risco/produtos-recomendados/1 completado em 480ms com status 200
2025-11-16 10:59:24.674 -03:00 [INF] HTTP GET /api/perfil-risco/produtos-recomendados/1 responded 200 in 757.6224 ms
2025-11-16 10:59:24.684 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/perfil-risco/produtos-recomendados/1 - 200 null application/json; charset=utf-8 868.573ms
2025-11-16 11:11:40.929 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-16 11:11:41.154 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-16 11:11:41.385 -03:00 [INF] Application started successfully
2025-11-16 11:11:41.434 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 11:11:41.673 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-16 11:11:41.675 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-16 11:11:41.806 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 11:11:41.807 -03:00 [INF] Hosting environment: Development
2025-11-16 11:11:41.809 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-16 11:11:56.192 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_vs/browserLink - null null
2025-11-16 11:11:56.192 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 11:11:56.281 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 100.1641ms
2025-11-16 11:11:56.343 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_vs/browserLink - 200 null text/javascript; charset=UTF-8 165.0254ms
2025-11-16 11:11:56.406 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - null null
2025-11-16 11:11:56.498 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 92.3816ms
2025-11-16 11:12:24.198 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/perfil-risco/produtos-recomendados/1 - null null
2025-11-16 11:12:24.353 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 11:12:24.361 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 11:12:24.366 -03:00 [INF] HTTP GET /api/perfil-risco/produtos-recomendados/1 responded 401 in 120.1766 ms
2025-11-16 11:12:24.372 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/perfil-risco/produtos-recomendados/1 - 401 0 null 178.9716ms
2025-11-16 11:12:46.121 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria - null null
2025-11-16 11:12:46.145 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-16 11:12:46.149 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-16 11:12:46.151 -03:00 [INF] HTTP GET /api/Telemetria responded 401 in 10.5028 ms
2025-11-16 11:12:46.155 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria - 401 0 null 34.5498ms
2025-11-16 11:18:52.944 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 83
2025-11-16 11:18:53.058 -03:00 [INF] CORS policy execution successful.
2025-11-16 11:18:53.065 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:18:53.098 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 11:18:53.247 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-16 11:18:53.391 -03:00 [INF] Recebida requisição de simulação para cliente 1
2025-11-16 11:18:53.396 -03:00 [INF] Iniciando simulação para cliente 1 com valor 100000
2025-11-16 11:18:53.546 -03:00 [INF] Executed DbCommand (8ms) [Parameters=[@__tipoProduto_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
FROM "Produtos" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."Tipo" = @__tipoProduto_0
LIMIT 1
2025-11-16 11:19:02.575 -03:00 [INF] Executed DbCommand (31ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Guid), @p7='?' (Size = 8), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = Decimal), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Simulacoes" ("Id", "ClienteId", "CreatedAt", "DataSimulacao", "IsDeleted", "PrazoMeses", "ProdutoId", "ProdutoSimulado", "RentabilidadeCalculada", "UpdatedAt", "ValorFinal", "ValorInvestido")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 11:19:02.591 -03:00 [INF] Simulação concluída. Valor inicial: 100000, Valor final: 154959.80477924800000
2025-11-16 11:19:02.612 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.SimulacaoResponse'.
2025-11-16 11:19:02.640 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API) in 9533.5902ms
2025-11-16 11:19:02.642 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:19:02.646 -03:00 [INF] Request POST /api/Simulacao/simular-investimento completado em 9581ms com status 200
2025-11-16 11:19:02.648 -03:00 [INF] HTTP POST /api/Simulacao/simular-investimento responded 200 in 9688.2363 ms
2025-11-16 11:19:02.653 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - 200 null application/json; charset=utf-8 9711.9781ms
2025-11-16 11:19:46.538 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Simulacao/simulacoes - null null
2025-11-16 11:19:46.557 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoes (InvestCaixa.API)'
2025-11-16 11:19:46.565 -03:00 [INF] Route matched with {action = "ObterSimulacoes", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[InvestCaixa.Application.DTOs.Response.SimulacaoHistoricoResponse]]] ObterSimulacoes(System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 11:19:46.573 -03:00 [INF] Obtendo histórico de todas as simulações
2025-11-16 11:19:46.650 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."ClienteId", "s"."CreatedAt", "s"."DataSimulacao", "s"."IsDeleted", "s"."PrazoMeses", "s"."ProdutoId", "s"."ProdutoSimulado", "s"."RentabilidadeCalculada", "s"."UpdatedAt", "s"."ValorFinal", "s"."ValorInvestido"
FROM "Simulacoes" AS "s"
WHERE NOT ("s"."IsDeleted")
2025-11-16 11:19:46.672 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[InvestCaixa.Application.DTOs.Response.SimulacaoHistoricoResponse, InvestCaixa.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-16 11:19:46.681 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoes (InvestCaixa.API) in 112.4503ms
2025-11-16 11:19:46.691 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoes (InvestCaixa.API)'
2025-11-16 11:19:46.694 -03:00 [INF] Request GET /api/Simulacao/simulacoes completado em 136ms com status 200
2025-11-16 11:19:46.697 -03:00 [INF] HTTP GET /api/Simulacao/simulacoes responded 200 in 143.3712 ms
2025-11-16 11:19:46.701 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Simulacao/simulacoes - 200 null application/json; charset=utf-8 163.8662ms
2025-11-16 11:20:06.125 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Simulacao/simulacoes/por-produto-dia?dataInicio=2023-10-13&dataFim=2025-11-16 - null null
2025-11-16 11:20:06.146 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia (InvestCaixa.API)'
2025-11-16 11:20:06.179 -03:00 [INF] Route matched with {action = "ObterSimulacoesPorProdutoDia", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[InvestCaixa.Application.Interfaces.SimulacaoPorProdutoDiaResponse]]] ObterSimulacoesPorProdutoDia(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 11:20:06.200 -03:00 [INF] Obtendo simulações por produto e dia. Período: "2023-10-13T00:00:00.0000000" a "2025-11-16T00:00:00.0000000"
2025-11-16 11:20:06.472 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia (InvestCaixa.API) in 288.1951ms
2025-11-16 11:20:06.476 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia (InvestCaixa.API)'
2025-11-16 11:20:06.506 -03:00 [INF] Request GET /api/Simulacao/simulacoes/por-produto-dia completado em 360ms com status 200
2025-11-16 11:20:06.511 -03:00 [ERR] HTTP GET /api/Simulacao/simulacoes/por-produto-dia responded 500 in 369.1257 ms
System.NotSupportedException: SQLite cannot apply aggregate operator 'Average' on expressions of type 'decimal'. Convert the values to a supported type, or use LINQ to Objects to aggregate the results on the client side.
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteQueryableAggregateMethodTranslator.Translate(MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.<>c__DisplayClass6_0.<Translate>b__0(IAggregateMethodCallTranslator t)
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Func`2 predicate, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.Translate(IModel model, MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateAggregateMethod(EnumerableExpression enumerableExpression, MethodInfo method, List`1 scalarArguments)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TryTranslateAggregateMethodCall(MethodCallExpression methodCallExpression, SqlExpression& translation)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateInternal(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateProjection(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.VisitMemberAssignment(MemberAssignment memberAssignment)
   at System.Linq.Expressions.ExpressionVisitor.VisitMemberBinding(MemberBinding node)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.VisitMemberInit(MemberInitExpression memberInitExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Translate(SelectExpression selectExpression, Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateSelect(ShapedQueryExpression source, LambdaExpression selector)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.SimulacaoRepository.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\SimulacaoRepository.cs:line 35
   at InvestCaixa.Application.Services.SimulacaoService.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 99
   at InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 68
   at lambda_method186(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-16 11:20:06.623 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: SQLite cannot apply aggregate operator 'Average' on expressions of type 'decimal'. Convert the values to a supported type, or use LINQ to Objects to aggregate the results on the client side.
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteQueryableAggregateMethodTranslator.Translate(MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.<>c__DisplayClass6_0.<Translate>b__0(IAggregateMethodCallTranslator t)
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Func`2 predicate, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.Translate(IModel model, MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateAggregateMethod(EnumerableExpression enumerableExpression, MethodInfo method, List`1 scalarArguments)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TryTranslateAggregateMethodCall(MethodCallExpression methodCallExpression, SqlExpression& translation)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateInternal(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateProjection(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.VisitMemberAssignment(MemberAssignment memberAssignment)
   at System.Linq.Expressions.ExpressionVisitor.VisitMemberBinding(MemberBinding node)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.VisitMemberInit(MemberInitExpression memberInitExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Translate(SelectExpression selectExpression, Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateSelect(ShapedQueryExpression source, LambdaExpression selector)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.SimulacaoRepository.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\SimulacaoRepository.cs:line 35
   at InvestCaixa.Application.Services.SimulacaoService.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 99
   at InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 68
   at lambda_method186(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 11:20:06.654 -03:00 [ERR] Ocorreu uma exceção: SQLite cannot apply aggregate operator 'Average' on expressions of type 'decimal'. Convert the values to a supported type, or use LINQ to Objects to aggregate the results on the client side.
System.NotSupportedException: SQLite cannot apply aggregate operator 'Average' on expressions of type 'decimal'. Convert the values to a supported type, or use LINQ to Objects to aggregate the results on the client side.
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteQueryableAggregateMethodTranslator.Translate(MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.<>c__DisplayClass6_0.<Translate>b__0(IAggregateMethodCallTranslator t)
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Func`2 predicate, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.Translate(IModel model, MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateAggregateMethod(EnumerableExpression enumerableExpression, MethodInfo method, List`1 scalarArguments)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TryTranslateAggregateMethodCall(MethodCallExpression methodCallExpression, SqlExpression& translation)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateInternal(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateProjection(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.VisitMemberAssignment(MemberAssignment memberAssignment)
   at System.Linq.Expressions.ExpressionVisitor.VisitMemberBinding(MemberBinding node)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.VisitMemberInit(MemberInitExpression memberInitExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Translate(SelectExpression selectExpression, Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateSelect(ShapedQueryExpression source, LambdaExpression selector)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.SimulacaoRepository.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\SimulacaoRepository.cs:line 35
   at InvestCaixa.Application.Services.SimulacaoService.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 99
   at InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 68
   at lambda_method186(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 11:20:06.734 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Simulacao/simulacoes/por-produto-dia?dataInicio=2023-10-13&dataFim=2025-11-16 - 500 null application/json; charset=utf-8 608.9004ms
2025-11-16 11:24:02.825 -03:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-16 11:24:03.046 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-16 11:24:03.191 -03:00 [INF] Application started successfully
2025-11-16 11:24:03.230 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 11:24:03.421 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-16 11:24:03.423 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-16 11:24:03.528 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 11:24:03.530 -03:00 [INF] Hosting environment: Development
2025-11-16 11:24:03.531 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-16 11:24:07.954 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Simulacao/simulacoes/por-produto-dia?dataInicio=2023-10-13&dataFim=2025-11-16 - null null
2025-11-16 11:24:08.251 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia (InvestCaixa.API)'
2025-11-16 11:24:08.297 -03:00 [INF] Route matched with {action = "ObterSimulacoesPorProdutoDia", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[InvestCaixa.Application.Interfaces.SimulacaoPorProdutoDiaResponse]]] ObterSimulacoesPorProdutoDia(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 11:24:08.415 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-16 11:24:08.483 -03:00 [INF] Obtendo simulações por produto e dia. Período: "2023-10-13T00:00:00.0000000" a "2025-11-16T00:00:00.0000000"
2025-11-16 11:24:08.861 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia (InvestCaixa.API) in 554.0756ms
2025-11-16 11:24:08.866 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia (InvestCaixa.API)'
2025-11-16 11:24:08.897 -03:00 [INF] Request GET /api/Simulacao/simulacoes/por-produto-dia completado em 647ms com status 200
2025-11-16 11:24:08.908 -03:00 [ERR] HTTP GET /api/Simulacao/simulacoes/por-produto-dia responded 500 in 882.2988 ms
System.NotSupportedException: SQLite cannot apply aggregate operator 'Sum' on expressions of type 'decimal'. Convert the values to a supported type, or use LINQ to Objects to aggregate the results on the client side.
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteQueryableAggregateMethodTranslator.Translate(MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.<>c__DisplayClass6_0.<Translate>b__0(IAggregateMethodCallTranslator t)
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Func`2 predicate, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.Translate(IModel model, MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateAggregateMethod(EnumerableExpression enumerableExpression, MethodInfo method, List`1 scalarArguments)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TryTranslateAggregateMethodCall(MethodCallExpression methodCallExpression, SqlExpression& translation)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateInternal(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateProjection(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.VisitNew(NewExpression newExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Translate(SelectExpression selectExpression, Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateSelect(ShapedQueryExpression source, LambdaExpression selector)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.SimulacaoRepository.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\SimulacaoRepository.cs:line 35
   at InvestCaixa.Application.Services.SimulacaoService.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 99
   at InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 68
   at lambda_method25(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-16 11:24:08.987 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.NotSupportedException: SQLite cannot apply aggregate operator 'Sum' on expressions of type 'decimal'. Convert the values to a supported type, or use LINQ to Objects to aggregate the results on the client side.
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteQueryableAggregateMethodTranslator.Translate(MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.<>c__DisplayClass6_0.<Translate>b__0(IAggregateMethodCallTranslator t)
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Func`2 predicate, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.Translate(IModel model, MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateAggregateMethod(EnumerableExpression enumerableExpression, MethodInfo method, List`1 scalarArguments)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TryTranslateAggregateMethodCall(MethodCallExpression methodCallExpression, SqlExpression& translation)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateInternal(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateProjection(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.VisitNew(NewExpression newExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Translate(SelectExpression selectExpression, Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateSelect(ShapedQueryExpression source, LambdaExpression selector)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.SimulacaoRepository.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\SimulacaoRepository.cs:line 35
   at InvestCaixa.Application.Services.SimulacaoService.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 99
   at InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 68
   at lambda_method25(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 11:24:09.013 -03:00 [ERR] Ocorreu uma exceção: SQLite cannot apply aggregate operator 'Sum' on expressions of type 'decimal'. Convert the values to a supported type, or use LINQ to Objects to aggregate the results on the client side.
System.NotSupportedException: SQLite cannot apply aggregate operator 'Sum' on expressions of type 'decimal'. Convert the values to a supported type, or use LINQ to Objects to aggregate the results on the client side.
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteQueryableAggregateMethodTranslator.Translate(MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.<>c__DisplayClass6_0.<Translate>b__0(IAggregateMethodCallTranslator t)
   at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.TryGetFirst[TSource](IEnumerable`1 source, Func`2 predicate, Boolean& found)
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   at Microsoft.EntityFrameworkCore.Query.RelationalAggregateMethodCallTranslatorProvider.Translate(IModel model, MethodInfo method, EnumerableExpression source, IReadOnlyList`1 arguments, IDiagnosticsLogger`1 logger)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateAggregateMethod(EnumerableExpression enumerableExpression, MethodInfo method, List`1 scalarArguments)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TryTranslateAggregateMethodCall(MethodCallExpression methodCallExpression, SqlExpression& translation)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Sqlite.Query.Internal.SqliteSqlTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateInternal(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.TranslateProjection(Expression expression, Boolean applyDefaultTypeMapping)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.VisitNew(NewExpression newExpression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Visit(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.Internal.RelationalProjectionBindingExpressionVisitor.Translate(SelectExpression selectExpression, Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.TranslateSelect(ShapedQueryExpression source, LambdaExpression selector)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.VisitMethodCall(MethodCallExpression methodCallExpression)
   at Microsoft.EntityFrameworkCore.Query.QueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.RelationalQueryableMethodTranslatingExpressionVisitor.Translate(Expression expression)
   at Microsoft.EntityFrameworkCore.Query.QueryCompilationContext.CreateQueryExecutor[TResult](Expression query)
   at Microsoft.EntityFrameworkCore.Storage.Database.CompileQuery[TResult](Expression query, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.CompileQueryCore[TResult](IDatabase database, Expression query, IModel model, Boolean async)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.<>c__DisplayClass12_0`1.<ExecuteAsync>b__0()
   at Microsoft.EntityFrameworkCore.Query.Internal.CompiledQueryCache.GetOrAddQuery[TResult](Object cacheKey, Func`1 compiler)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryable`1.GetAsyncEnumerator(CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.ConfiguredCancelableAsyncEnumerable`1.GetAsyncEnumerator()
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ToListAsync[TSource](IQueryable`1 source, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.SimulacaoRepository.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\SimulacaoRepository.cs:line 35
   at InvestCaixa.Application.Services.SimulacaoService.ObterSimulacoesPorProdutoDiaAsync(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 99
   at InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia(Nullable`1 dataInicio, Nullable`1 dataFim, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 68
   at lambda_method25(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 11:24:09.082 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Simulacao/simulacoes/por-produto-dia?dataInicio=2023-10-13&dataFim=2025-11-16 - 500 null application/json; charset=utf-8 1138.2677ms
2025-11-16 11:26:10.353 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-16 11:26:10.642 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-16 11:26:10.772 -03:00 [INF] Application started successfully
2025-11-16 11:26:10.827 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 11:26:11.026 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-16 11:26:11.027 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-16 11:26:11.148 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 11:26:11.152 -03:00 [INF] Hosting environment: Development
2025-11-16 11:26:11.156 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-16 11:26:12.716 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Simulacao/simulacoes/por-produto-dia?dataInicio=2023-10-13&dataFim=2025-11-16 - null null
2025-11-16 11:26:12.927 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia (InvestCaixa.API)'
2025-11-16 11:26:12.965 -03:00 [INF] Route matched with {action = "ObterSimulacoesPorProdutoDia", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[System.Collections.Generic.IEnumerable`1[InvestCaixa.Application.Interfaces.SimulacaoPorProdutoDiaResponse]]] ObterSimulacoesPorProdutoDia(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 11:26:13.082 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-16 11:26:13.133 -03:00 [INF] Obtendo simulações por produto e dia. Período: "2023-10-13T00:00:00.0000000" a "2025-11-16T00:00:00.0000000"
2025-11-16 11:26:13.358 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[@__inicio_Date_0='?' (DbType = DateTime), @__fim_Date_1='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."ClienteId", "s"."CreatedAt", "s"."DataSimulacao", "s"."IsDeleted", "s"."PrazoMeses", "s"."ProdutoId", "s"."ProdutoSimulado", "s"."RentabilidadeCalculada", "s"."UpdatedAt", "s"."ValorFinal", "s"."ValorInvestido", "t"."Id", "t"."CreatedAt", "t"."IsDeleted", "t"."Nome", "t"."PerfilRecomendado", "t"."PermiteLiquidez", "t"."PrazoMinimoDias", "t"."Rentabilidade", "t"."Risco", "t"."Tipo", "t"."UpdatedAt", "t"."ValorMinimoAplicacao"
FROM "Simulacoes" AS "s"
INNER JOIN (
    SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
    FROM "Produtos" AS "p"
    WHERE NOT ("p"."IsDeleted")
) AS "t" ON "s"."ProdutoId" = "t"."Id"
WHERE NOT ("s"."IsDeleted") AND rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "s"."DataSimulacao", 'start of day'), '0'), '.') >= @__inicio_Date_0 AND rtrim(rtrim(strftime('%Y-%m-%d %H:%M:%f', "s"."DataSimulacao", 'start of day'), '0'), '.') <= @__fim_Date_1
2025-11-16 11:26:13.394 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Linq.Enumerable+SelectListIterator`2[[InvestCaixa.Domain.Interfaces.SimulacaoPorProdutoDia, InvestCaixa.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null],[InvestCaixa.Application.Interfaces.SimulacaoPorProdutoDiaResponse, InvestCaixa.Application, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2025-11-16 11:26:13.427 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia (InvestCaixa.API) in 453.9351ms
2025-11-16 11:26:13.430 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.ObterSimulacoesPorProdutoDia (InvestCaixa.API)'
2025-11-16 11:26:13.435 -03:00 [INF] Request GET /api/Simulacao/simulacoes/por-produto-dia completado em 508ms com status 200
2025-11-16 11:26:13.441 -03:00 [INF] HTTP GET /api/Simulacao/simulacoes/por-produto-dia responded 200 in 672.7234 ms
2025-11-16 11:26:13.451 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Simulacao/simulacoes/por-produto-dia?dataInicio=2023-10-13&dataFim=2025-11-16 - 200 null application/json; charset=utf-8 746.5873ms
2025-11-16 11:29:48.818 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-16&dataFim=2025-11-16 - null null
2025-11-16 11:29:48.833 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.TelemetriaController.ObterTelemetria (InvestCaixa.API)'
2025-11-16 11:29:48.846 -03:00 [INF] Route matched with {action = "ObterTelemetria", controller = "Telemetria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.TelemetriaResponse]] ObterTelemetria(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.TelemetriaController (InvestCaixa.API).
2025-11-16 11:29:48.858 -03:00 [INF] Obtendo dados de telemetria
2025-11-16 11:29:48.861 -03:00 [INF] Obtendo dados de telemetria
2025-11-16 11:29:48.867 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.TelemetriaResponse'.
2025-11-16 11:29:48.885 -03:00 [INF] Executed action InvestCaixa.API.Controllers.TelemetriaController.ObterTelemetria (InvestCaixa.API) in 34.1005ms
2025-11-16 11:29:48.888 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.TelemetriaController.ObterTelemetria (InvestCaixa.API)'
2025-11-16 11:29:48.891 -03:00 [INF] Request GET /api/Telemetria completado em 58ms com status 200
2025-11-16 11:29:48.898 -03:00 [INF] HTTP GET /api/Telemetria responded 200 in 70.7633 ms
2025-11-16 11:29:48.903 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-16&dataFim=2025-11-16 - 200 null application/json; charset=utf-8 85.1965ms
2025-11-16 11:43:16.986 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 78
2025-11-16 11:43:17.030 -03:00 [INF] CORS policy execution successful.
2025-11-16 11:43:17.034 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:43:17.042 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 11:43:17.161 -03:00 [INF] Recebida requisição de simulação para cliente 1
2025-11-16 11:43:17.165 -03:00 [INF] Iniciando simulação para cliente 1 com valor 1
2025-11-16 11:43:17.294 -03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__tipoProduto_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
FROM "Produtos" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."Tipo" = @__tipoProduto_0
LIMIT 1
2025-11-16 11:43:17.406 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API) in 361.0384ms
2025-11-16 11:43:17.412 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:43:17.440 -03:00 [INF] Request POST /api/Simulacao/simular-investimento completado em 405ms com status 200
2025-11-16 11:43:17.444 -03:00 [ERR] HTTP POST /api/Simulacao/simular-investimento responded 500 in 428.0617 ms
InvestCaixa.Domain.Exceptions.ValidationException: Valor mínimo para este produto é R$ 5.000,00
   at InvestCaixa.Application.Services.SimulacaoService.SimularInvestimentoAsync(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 42
   at InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 38
   at lambda_method44(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-16 11:43:17.492 -03:00 [ERR] An unhandled exception has occurred while executing the request.
InvestCaixa.Domain.Exceptions.ValidationException: Valor mínimo para este produto é R$ 5.000,00
   at InvestCaixa.Application.Services.SimulacaoService.SimularInvestimentoAsync(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 42
   at InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 38
   at lambda_method44(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 11:43:17.505 -03:00 [ERR] Ocorreu uma exceção: Valor mínimo para este produto é R$ 5.000,00
InvestCaixa.Domain.Exceptions.ValidationException: Valor mínimo para este produto é R$ 5.000,00
   at InvestCaixa.Application.Services.SimulacaoService.SimularInvestimentoAsync(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 42
   at InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 38
   at lambda_method44(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 11:43:17.555 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - 400 null application/json; charset=utf-8 569.2431ms
2025-11-16 11:43:30.522 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 77
2025-11-16 11:43:30.530 -03:00 [INF] CORS policy execution successful.
2025-11-16 11:43:30.532 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:43:30.534 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 11:43:30.558 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 11:43:30.577 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API) in 38.5636ms
2025-11-16 11:43:30.580 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:43:30.582 -03:00 [INF] Request POST /api/Simulacao/simular-investimento completado em 50ms com status 400
2025-11-16 11:43:30.586 -03:00 [INF] HTTP POST /api/Simulacao/simular-investimento responded 400 in 57.1953 ms
2025-11-16 11:43:30.589 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - 400 null application/problem+json; charset=utf-8 67.8117ms
2025-11-16 11:43:44.114 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 81
2025-11-16 11:43:44.120 -03:00 [INF] CORS policy execution successful.
2025-11-16 11:43:44.124 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:43:44.127 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 11:43:44.144 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 11:43:44.147 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API) in 6.8397ms
2025-11-16 11:43:44.150 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:43:44.152 -03:00 [INF] Request POST /api/Simulacao/simular-investimento completado em 27ms com status 400
2025-11-16 11:43:44.156 -03:00 [INF] HTTP POST /api/Simulacao/simular-investimento responded 400 in 35.9074 ms
2025-11-16 11:43:44.159 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - 400 null application/problem+json; charset=utf-8 45.4661ms
2025-11-16 11:43:52.287 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 58
2025-11-16 11:43:52.316 -03:00 [INF] CORS policy execution successful.
2025-11-16 11:43:52.320 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:43:52.354 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 11:43:52.393 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 11:43:52.397 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API) in 39.2028ms
2025-11-16 11:43:52.398 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:43:52.401 -03:00 [INF] Request POST /api/Simulacao/simular-investimento completado em 81ms com status 400
2025-11-16 11:43:52.404 -03:00 [INF] HTTP POST /api/Simulacao/simular-investimento responded 400 in 89.4881 ms
2025-11-16 11:43:52.408 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - 400 null application/problem+json; charset=utf-8 122.0017ms
2025-11-16 11:44:02.961 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 57
2025-11-16 11:44:02.965 -03:00 [INF] CORS policy execution successful.
2025-11-16 11:44:02.967 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:44:02.972 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 11:44:02.985 -03:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2025-11-16 11:44:02.988 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API) in 6.7687ms
2025-11-16 11:44:02.994 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 11:44:02.996 -03:00 [INF] Request POST /api/Simulacao/simular-investimento completado em 29ms com status 400
2025-11-16 11:44:03.000 -03:00 [INF] HTTP POST /api/Simulacao/simular-investimento responded 400 in 34.8861 ms
2025-11-16 11:44:03.004 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - 400 null application/problem+json; charset=utf-8 44.0675ms
2025-11-16 16:35:25.841 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-16 16:35:26.191 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-16 16:35:26.473 -03:00 [INF] Application started successfully
2025-11-16 16:35:26.524 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 16:35:26.834 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-16 16:35:26.836 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-16 16:35:27.210 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 16:35:27.212 -03:00 [INF] Hosting environment: Development
2025-11-16 16:35:27.213 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-16 16:36:04.538 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/index.html - null null
2025-11-16 16:36:04.948 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/index.html - 200 null text/html;charset=utf-8 423.4698ms
2025-11-16 16:36:05.026 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/index.css - null null
2025-11-16 16:36:05.030 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/swagger-ui-bundle.js - null null
2025-11-16 16:36:05.037 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/swagger-ui-standalone-preset.js - null null
2025-11-16 16:36:05.027 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/swagger-ui.css - null null
2025-11-16 16:36:05.041 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/index.js - null null
2025-11-16 16:36:05.054 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - null null
2025-11-16 16:36:05.114 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/index.js - 200 null application/javascript;charset=utf-8 73.4251ms
2025-11-16 16:36:05.130 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/index.css - 200 152 text/css 104.205ms
2025-11-16 16:36:05.065 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_vs/browserLink - null null
2025-11-16 16:36:05.168 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - 200 13766 application/javascript; charset=utf-8 113.4356ms
2025-11-16 16:36:05.171 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/swagger-ui.css - 200 23649 text/css 144.3796ms
2025-11-16 16:36:05.171 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/swagger-ui-standalone-preset.js - 200 77354 text/javascript 133.8904ms
2025-11-16 16:36:05.175 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/swagger-ui-bundle.js - 200 424834 text/javascript 145.7412ms
2025-11-16 16:36:05.397 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_vs/browserLink - 200 null text/javascript; charset=UTF-8 332.2888ms
2025-11-16 16:36:05.485 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - null null
2025-11-16 16:36:05.525 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 40.7786ms
2025-11-16 16:36:22.306 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 48
2025-11-16 16:36:22.495 -03:00 [INF] CORS policy execution successful.
2025-11-16 16:36:22.502 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-16 16:36:22.543 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-16 16:36:22.713 -03:00 [INF] Tentativa de login para usuário admin
2025-11-16 16:36:22.718 -03:00 [INF] Processando login para usuário admin
2025-11-16 16:36:22.784 -03:00 [INF] Login bem-sucedido para usuário admin
2025-11-16 16:36:22.800 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.LoginResponse'.
2025-11-16 16:36:22.825 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 270.7242ms
2025-11-16 16:36:22.829 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-16 16:36:22.834 -03:00 [INF] Request POST /api/Auth/login completado em 331ms com status 200
2025-11-16 16:36:22.841 -03:00 [INF] HTTP POST /api/Auth/login responded 200 in 520.3253 ms
2025-11-16 16:36:22.848 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 200 null application/json; charset=utf-8 541.3504ms
2025-11-16 16:37:00.976 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria - null null
2025-11-16 16:37:01.092 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.TelemetriaController.ObterTelemetria (InvestCaixa.API)'
2025-11-16 16:37:01.105 -03:00 [INF] Route matched with {action = "ObterTelemetria", controller = "Telemetria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.TelemetriaResponse]] ObterTelemetria(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.TelemetriaController (InvestCaixa.API).
2025-11-16 16:37:01.114 -03:00 [INF] Obtendo dados de telemetria
2025-11-16 16:37:01.118 -03:00 [INF] Obtendo dados de telemetria
2025-11-16 16:37:01.124 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.TelemetriaResponse'.
2025-11-16 16:37:01.144 -03:00 [INF] Executed action InvestCaixa.API.Controllers.TelemetriaController.ObterTelemetria (InvestCaixa.API) in 34.8191ms
2025-11-16 16:37:01.155 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.TelemetriaController.ObterTelemetria (InvestCaixa.API)'
2025-11-16 16:37:01.157 -03:00 [INF] Request GET /api/Telemetria completado em 64ms com status 200
2025-11-16 16:37:01.159 -03:00 [INF] HTTP GET /api/Telemetria responded 200 in 172.2322 ms
2025-11-16 16:37:01.163 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria - 200 null application/json; charset=utf-8 191.9476ms
2025-11-16 16:37:33.142 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 83
2025-11-16 16:37:33.194 -03:00 [INF] CORS policy execution successful.
2025-11-16 16:37:33.202 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 16:37:33.211 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-16 16:37:33.376 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-16 16:37:33.413 -03:00 [INF] Recebida requisição de simulação para cliente 1
2025-11-16 16:37:33.418 -03:00 [INF] Iniciando simulação para cliente 1 com valor 4000
2025-11-16 16:37:33.604 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[@__tipoProduto_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
FROM "Produtos" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."Tipo" = @__tipoProduto_0
LIMIT 1
2025-11-16 16:37:33.911 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Guid), @p7='?' (Size = 23), @p8='?' (DbType = Decimal), @p9='?' (DbType = DateTime), @p10='?' (DbType = Decimal), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Simulacoes" ("Id", "ClienteId", "CreatedAt", "DataSimulacao", "IsDeleted", "PrazoMeses", "ProdutoId", "ProdutoSimulado", "RentabilidadeCalculada", "UpdatedAt", "ValorFinal", "ValorInvestido")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 16:37:33.927 -03:00 [INF] Simulação concluída. Valor inicial: 4000, Valor final: 5718.01124771608000
2025-11-16 16:37:33.943 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.SimulacaoResponse'.
2025-11-16 16:37:33.956 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API) in 742.3284ms
2025-11-16 16:37:33.959 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-16 16:37:33.962 -03:00 [INF] Request POST /api/Simulacao/simular-investimento completado em 760ms com status 200
2025-11-16 16:37:33.965 -03:00 [INF] HTTP POST /api/Simulacao/simular-investimento responded 200 in 789.8529 ms
2025-11-16 16:37:33.970 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - 200 null application/json; charset=utf-8 827.3639ms
2025-11-16 16:37:55.128 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/perfil-risco/1 - null null
2025-11-16 16:37:55.148 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API)'
2025-11-16 16:37:55.157 -03:00 [INF] Route matched with {action = "ObterPerfilRisco", controller = "PerfilRisco"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObterPerfilRisco(Int32, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.PerfilRiscoController (InvestCaixa.API).
2025-11-16 16:37:55.165 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-16 16:37:55.180 -03:00 [INF] Obtendo perfil de risco para cliente 1
2025-11-16 16:37:55.292 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CPF", "c"."CreatedAt", "c"."DataNascimento", "c"."Email", "c"."IsDeleted", "c"."Nome", "c"."PerfilAtual", "c"."UpdatedAt"
FROM "Clientes" AS "c"
WHERE NOT ("c"."IsDeleted") AND "c"."Id" = @__p_0
LIMIT 1
2025-11-16 16:37:55.351 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clienteId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."ClienteId", "p"."CreatedAt", "p"."Descricao", "p"."FrequenciaMovimentacoes", "p"."IsDeleted", "p"."Perfil", "p"."Pontuacao", "p"."PrefereLiquidez", "p"."UpdatedAt", "p"."VolumeInvestimentos"
FROM "PerfisRisco" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."ClienteId" = @__clienteId_0
LIMIT 1
2025-11-16 16:37:55.358 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.PerfilRiscoResponse'.
2025-11-16 16:37:55.362 -03:00 [INF] Executed action InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API) in 200.5646ms
2025-11-16 16:37:55.364 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API)'
2025-11-16 16:37:55.366 -03:00 [INF] Request GET /api/perfil-risco/1 completado em 217ms com status 200
2025-11-16 16:37:55.368 -03:00 [INF] HTTP GET /api/perfil-risco/1 responded 200 in 222.8809 ms
2025-11-16 16:37:55.371 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/perfil-risco/1 - 200 null application/json; charset=utf-8 243.9726ms
2025-11-16 16:40:05.827 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/perfil-financeiro/1 - application/json 203
2025-11-16 16:40:05.861 -03:00 [INF] CORS policy execution successful.
2025-11-16 16:40:05.863 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.PerfilFinanceiroController.CriarPerfilFinanceiro (InvestCaixa.API)'
2025-11-16 16:40:05.870 -03:00 [INF] Route matched with {action = "CriarPerfilFinanceiro", controller = "PerfilFinanceiro"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CriarPerfilFinanceiro(Int32, InvestCaixa.Application.DTOs.Request.CriarPerfilFinanceiroRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.PerfilFinanceiroController (InvestCaixa.API).
2025-11-16 16:40:05.892 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CPF", "c"."CreatedAt", "c"."DataNascimento", "c"."Email", "c"."IsDeleted", "c"."Nome", "c"."PerfilAtual", "c"."UpdatedAt"
FROM "Clientes" AS "c"
WHERE NOT ("c"."IsDeleted") AND "c"."Id" = @__p_0
LIMIT 1
2025-11-16 16:40:05.971 -03:00 [ERR] Failed executing DbCommand (6ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PerfisFinanceiros" ("Id", "ClienteId", "CreatedAt", "DependentesFinanceiros", "DividasAtivas", "ExperienciaInvestimentos", "Horizonte", "IsDeleted", "Objetivo", "PatrimonioTotal", "RendaMensal", "ToleranciaPerda", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-11-16 16:40:06.025 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'InvestCaixa.Infrastructure.Data.InvestimentoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: PerfisFinanceiros'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: PerfisFinanceiros'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-16 16:40:06.159 -03:00 [INF] Executed action InvestCaixa.API.Controllers.PerfilFinanceiroController.CriarPerfilFinanceiro (InvestCaixa.API) in 285.3759ms
2025-11-16 16:40:06.163 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.PerfilFinanceiroController.CriarPerfilFinanceiro (InvestCaixa.API)'
2025-11-16 16:40:06.188 -03:00 [INF] Request POST /api/perfil-financeiro/1 completado em 325ms com status 200
2025-11-16 16:40:06.193 -03:00 [ERR] HTTP POST /api/perfil-financeiro/1 responded 500 in 332.9259 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: PerfisFinanceiros'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync(CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\UnitOfWork.cs:line 36
   at InvestCaixa.API.Controllers.PerfilFinanceiroController.CriarPerfilFinanceiro(Int32 clienteId, CriarPerfilFinanceiroRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfiFinanceiroController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-16 16:40:06.228 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: PerfisFinanceiros'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync(CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\UnitOfWork.cs:line 36
   at InvestCaixa.API.Controllers.PerfilFinanceiroController.CriarPerfilFinanceiro(Int32 clienteId, CriarPerfilFinanceiroRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfiFinanceiroController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 16:40:06.253 -03:00 [ERR] Ocorreu uma exceção: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 1: 'no such table: PerfisFinanceiros'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteCommand.PrepareAndEnumerateStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteCommand.GetStatements()+MoveNext()
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync(CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\UnitOfWork.cs:line 36
   at InvestCaixa.API.Controllers.PerfilFinanceiroController.CriarPerfilFinanceiro(Int32 clienteId, CriarPerfilFinanceiroRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\PerfiFinanceiroController.cs:line 47
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-16 16:40:06.300 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/perfil-financeiro/1 - 500 null application/json; charset=utf-8 472.9002ms
2025-11-16 16:40:35.930 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-11-16 16:40:36.298 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Clientes" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Clientes" PRIMARY KEY AUTOINCREMENT,
    "Nome" TEXT NOT NULL,
    "Email" TEXT NOT NULL,
    "CPF" TEXT NOT NULL,
    "DataNascimento" TEXT NOT NULL,
    "PerfilAtual" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL
);
2025-11-16 16:40:36.304 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Produtos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Produtos" PRIMARY KEY,
    "Nome" TEXT NOT NULL,
    "Tipo" INTEGER NOT NULL,
    "Rentabilidade" TEXT NOT NULL,
    "Risco" INTEGER NOT NULL,
    "PrazoMinimoDias" INTEGER NOT NULL,
    "ValorMinimoAplicacao" TEXT NOT NULL,
    "PermiteLiquidez" INTEGER NOT NULL,
    "PerfilRecomendado" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL
);
2025-11-16 16:40:36.310 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PerfisFinanceiros" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_PerfisFinanceiros" PRIMARY KEY,
    "ClienteId" INTEGER NOT NULL,
    "RendaMensal" TEXT NOT NULL,
    "PatrimonioTotal" TEXT NOT NULL,
    "DividasAtivas" TEXT NOT NULL,
    "DependentesFinanceiros" INTEGER NOT NULL,
    "Horizonte" INTEGER NOT NULL,
    "Objetivo" INTEGER NOT NULL,
    "ToleranciaPerda" INTEGER NOT NULL,
    "ExperienciaInvestimentos" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_PerfisFinanceiros_Clientes_ClienteId" FOREIGN KEY ("ClienteId") REFERENCES "Clientes" ("Id") ON DELETE CASCADE
);
2025-11-16 16:40:36.314 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PerfisRisco" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_PerfisRisco" PRIMARY KEY,
    "ClienteId" INTEGER NOT NULL,
    "Perfil" INTEGER NOT NULL,
    "Pontuacao" INTEGER NOT NULL,
    "Descricao" TEXT NOT NULL,
    "VolumeInvestimentos" TEXT NOT NULL,
    "FrequenciaMovimentacoes" INTEGER NOT NULL,
    "PrefereLiquidez" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_PerfisRisco_Clientes_ClienteId" FOREIGN KEY ("ClienteId") REFERENCES "Clientes" ("Id") ON DELETE CASCADE
);
2025-11-16 16:40:36.320 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "InvestimentosFinalizados" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_InvestimentosFinalizados" PRIMARY KEY,
    "ClienteId" INTEGER NOT NULL,
    "ProdutoId" TEXT NOT NULL,
    "ValorAplicado" TEXT NOT NULL,
    "ValorResgatado" TEXT NOT NULL,
    "DataAplicacao" TEXT NOT NULL,
    "DataResgate" TEXT NULL,
    "Status" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_InvestimentosFinalizados_Clientes_ClienteId" FOREIGN KEY ("ClienteId") REFERENCES "Clientes" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_InvestimentosFinalizados_Produtos_ProdutoId" FOREIGN KEY ("ProdutoId") REFERENCES "Produtos" ("Id") ON DELETE RESTRICT
);
2025-11-16 16:40:36.325 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Simulacoes" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Simulacoes" PRIMARY KEY,
    "ClienteId" INTEGER NOT NULL,
    "ProdutoSimulado" TEXT NOT NULL,
    "ProdutoId" TEXT NOT NULL,
    "ValorInvestido" TEXT NOT NULL,
    "ValorFinal" TEXT NOT NULL,
    "PrazoMeses" INTEGER NOT NULL,
    "DataSimulacao" TEXT NOT NULL,
    "RentabilidadeCalculada" TEXT NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_Simulacoes_Clientes_ClienteId" FOREIGN KEY ("ClienteId") REFERENCES "Clientes" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Simulacoes_Produtos_ProdutoId" FOREIGN KEY ("ProdutoId") REFERENCES "Produtos" ("Id") ON DELETE RESTRICT
);
2025-11-16 16:40:36.330 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES ('1D0F88E7-8F33-44FB-AF04-0D854A5DBAC1', '2025-11-16 19:40:36.03159', 0, 'LCI Plus', 1, 0, 90, '0.11', 1, 2, NULL, '5000.0');
SELECT changes();

INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES ('25986092-F265-4C34-8745-BD3A7EFFE29B', '2025-11-16 19:40:36.0315893', 0, 'CDB Caixa 2026', 1, 1, 180, '0.12', 1, 1, NULL, '1000.0');
SELECT changes();

INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES ('EB5B9F21-D7DB-46CD-A31A-C6CBC12A40D9', '2025-11-16 19:40:36.0315901', 0, 'Fundo Multimercado XPTO', 3, 1, 0, '0.18', 3, 5, NULL, '500.0');
SELECT changes();
2025-11-16 16:40:36.335 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Clientes_CPF" ON "Clientes" ("CPF");
2025-11-16 16:40:36.339 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Clientes_Email" ON "Clientes" ("Email");
2025-11-16 16:40:36.344 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_InvestimentosFinalizados_ClienteId" ON "InvestimentosFinalizados" ("ClienteId");
2025-11-16 16:40:36.349 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_InvestimentosFinalizados_ProdutoId" ON "InvestimentosFinalizados" ("ProdutoId");
2025-11-16 16:40:36.355 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_InvestimentosFinalizados_Status" ON "InvestimentosFinalizados" ("Status");
2025-11-16 16:40:36.359 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_PerfisFinanceiros_ClienteId" ON "PerfisFinanceiros" ("ClienteId");
2025-11-16 16:40:36.367 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_PerfisRisco_ClienteId" ON "PerfisRisco" ("ClienteId");
2025-11-16 16:40:36.371 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_PerfisRisco_Perfil" ON "PerfisRisco" ("Perfil");
2025-11-16 16:40:36.378 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Produtos_PerfilRecomendado" ON "Produtos" ("PerfilRecomendado");
2025-11-16 16:40:36.383 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Produtos_Tipo" ON "Produtos" ("Tipo");
2025-11-16 16:40:36.388 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Simulacoes_ClienteId" ON "Simulacoes" ("ClienteId");
2025-11-16 16:40:36.392 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Simulacoes_DataSimulacao" ON "Simulacoes" ("DataSimulacao");
2025-11-16 16:40:36.397 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Simulacoes_ProdutoId" ON "Simulacoes" ("ProdutoId");
2025-11-16 16:40:36.700 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-16 16:40:36.712 -03:00 [INF] Seeding database with initial data...
2025-11-16 16:40:36.996 -03:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 11), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 13), @p4='?' (DbType = Boolean), @p5='?' (Size = 10), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Clientes" ("CPF", "CreatedAt", "DataNascimento", "Email", "IsDeleted", "Nome", "PerfilAtual", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-11-16 16:40:37.025 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 14), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 16:40:37.030 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 18), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 16:40:37.035 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 19), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 16:40:37.040 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 8), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 16:40:37.046 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 18), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-16 16:40:37.093 -03:00 [INF] Database seeded successfully with 5 products and 1 client
2025-11-16 16:40:37.303 -03:00 [INF] Application started successfully
2025-11-16 16:40:37.372 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-16 16:40:37.662 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-16 16:40:37.664 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-16 16:40:37.802 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-16 16:40:37.804 -03:00 [INF] Hosting environment: Development
2025-11-16 16:40:37.805 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-16 16:40:57.288 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/perfil-financeiro/1 - application/json 203
2025-11-16 16:40:57.616 -03:00 [INF] CORS policy execution successful.
2025-11-16 16:40:57.626 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.PerfilFinanceiroController.CriarPerfilFinanceiro (InvestCaixa.API)'
2025-11-16 16:40:57.682 -03:00 [INF] Route matched with {action = "CriarPerfilFinanceiro", controller = "PerfilFinanceiro"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CriarPerfilFinanceiro(Int32, InvestCaixa.Application.DTOs.Request.CriarPerfilFinanceiroRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.PerfilFinanceiroController (InvestCaixa.API).
2025-11-16 16:40:57.940 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CPF", "c"."CreatedAt", "c"."DataNascimento", "c"."Email", "c"."IsDeleted", "c"."Nome", "c"."PerfilAtual", "c"."UpdatedAt"
FROM "Clientes" AS "c"
WHERE NOT ("c"."IsDeleted") AND "c"."Id" = @__p_0
LIMIT 1
2025-11-16 16:40:58.066 -03:00 [INF] Executed DbCommand (25ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = Int32), @p4='?' (DbType = Decimal), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Boolean), @p8='?' (DbType = Int32), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal), @p11='?' (DbType = Int32), @p12='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PerfisFinanceiros" ("Id", "ClienteId", "CreatedAt", "DependentesFinanceiros", "DividasAtivas", "ExperienciaInvestimentos", "Horizonte", "IsDeleted", "Objetivo", "PatrimonioTotal", "RendaMensal", "ToleranciaPerda", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12);
2025-11-16 16:40:58.082 -03:00 [INF] Executing CreatedAtActionResult, writing value of type '<>f__AnonymousType0`1[[System.Guid, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-11-16 16:40:58.131 -03:00 [INF] Executed action InvestCaixa.API.Controllers.PerfilFinanceiroController.CriarPerfilFinanceiro (InvestCaixa.API) in 437.9285ms
2025-11-16 16:40:58.135 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.PerfilFinanceiroController.CriarPerfilFinanceiro (InvestCaixa.API)'
2025-11-16 16:40:58.140 -03:00 [INF] Request POST /api/perfil-financeiro/1 completado em 515ms com status 201
2025-11-16 16:40:58.151 -03:00 [INF] HTTP POST /api/perfil-financeiro/1 responded 201 in 751.5017 ms
2025-11-16 16:40:58.161 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/perfil-financeiro/1 - 201 null application/json; charset=utf-8 884.8247ms
2025-11-16 16:41:06.785 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/perfil-risco/1 - null null
2025-11-16 16:41:06.815 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API)'
2025-11-16 16:41:06.829 -03:00 [INF] Route matched with {action = "ObterPerfilRisco", controller = "PerfilRisco"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObterPerfilRisco(Int32, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.PerfilRiscoController (InvestCaixa.API).
2025-11-16 16:41:06.837 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software MediatR. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-16 16:41:06.980 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-16 16:41:06.984 -03:00 [INF] Obtendo perfil de risco para cliente 1
2025-11-16 16:41:07.046 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "c"."Id", "c"."CPF", "c"."CreatedAt", "c"."DataNascimento", "c"."Email", "c"."IsDeleted", "c"."Nome", "c"."PerfilAtual", "c"."UpdatedAt"
FROM "Clientes" AS "c"
WHERE NOT ("c"."IsDeleted") AND "c"."Id" = @__p_0
LIMIT 1
2025-11-16 16:41:07.072 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__clienteId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."ClienteId", "p"."CreatedAt", "p"."Descricao", "p"."FrequenciaMovimentacoes", "p"."IsDeleted", "p"."Perfil", "p"."Pontuacao", "p"."PrefereLiquidez", "p"."UpdatedAt", "p"."VolumeInvestimentos"
FROM "PerfisRisco" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."ClienteId" = @__clienteId_0
LIMIT 1
2025-11-16 16:41:07.190 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[@__clienteId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "s"."Id", "s"."ClienteId", "s"."CreatedAt", "s"."DataSimulacao", "s"."IsDeleted", "s"."PrazoMeses", "s"."ProdutoId", "s"."ProdutoSimulado", "s"."RentabilidadeCalculada", "s"."UpdatedAt", "s"."ValorFinal", "s"."ValorInvestido", "t"."Id", "t"."CreatedAt", "t"."IsDeleted", "t"."Nome", "t"."PerfilRecomendado", "t"."PermiteLiquidez", "t"."PrazoMinimoDias", "t"."Rentabilidade", "t"."Risco", "t"."Tipo", "t"."UpdatedAt", "t"."ValorMinimoAplicacao", "t0"."Id", "t0"."CPF", "t0"."CreatedAt", "t0"."DataNascimento", "t0"."Email", "t0"."IsDeleted", "t0"."Nome", "t0"."PerfilAtual", "t0"."UpdatedAt"
FROM "Simulacoes" AS "s"
INNER JOIN (
    SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
    FROM "Produtos" AS "p"
    WHERE NOT ("p"."IsDeleted")
) AS "t" ON "s"."ProdutoId" = "t"."Id"
INNER JOIN (
    SELECT "c"."Id", "c"."CPF", "c"."CreatedAt", "c"."DataNascimento", "c"."Email", "c"."IsDeleted", "c"."Nome", "c"."PerfilAtual", "c"."UpdatedAt"
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted")
) AS "t0" ON "s"."ClienteId" = "t0"."Id"
WHERE NOT ("s"."IsDeleted") AND "s"."ClienteId" = @__clienteId_0
ORDER BY "s"."DataSimulacao" DESC
2025-11-16 16:41:07.211 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__clienteId_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."ClienteId", "p"."CreatedAt", "p"."DependentesFinanceiros", "p"."DividasAtivas", "p"."ExperienciaInvestimentos", "p"."Horizonte", "p"."IsDeleted", "p"."Objetivo", "p"."PatrimonioTotal", "p"."RendaMensal", "p"."ToleranciaPerda", "p"."UpdatedAt"
FROM "PerfisFinanceiros" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."ClienteId" = @__clienteId_0 AND NOT ("p"."IsDeleted")
LIMIT 1
2025-11-16 16:41:07.272 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (Size = 65), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Boolean), @p9='?' (DbType = DateTime), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "PerfisRisco" ("Id", "ClienteId", "CreatedAt", "Descricao", "FrequenciaMovimentacoes", "IsDeleted", "Perfil", "Pontuacao", "PrefereLiquidez", "UpdatedAt", "VolumeInvestimentos")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-16 16:41:07.291 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.PerfilRiscoResponse'.
2025-11-16 16:41:07.299 -03:00 [INF] Executed action InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API) in 467.4187ms
2025-11-16 16:41:07.302 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.PerfilRiscoController.ObterPerfilRisco (InvestCaixa.API)'
2025-11-16 16:41:07.304 -03:00 [INF] Request GET /api/perfil-risco/1 completado em 489ms com status 200
2025-11-16 16:41:07.307 -03:00 [INF] HTTP GET /api/perfil-risco/1 responded 200 in 506.9617 ms
2025-11-16 16:41:07.310 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/perfil-risco/1 - 200 null application/json; charset=utf-8 525.8946ms
