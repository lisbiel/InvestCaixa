2025-11-14 15:17:39.900 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
PRAGMA journal_mode = 'wal';
2025-11-14 15:17:40.142 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Clientes" (
    "Id" INTEGER NOT NULL CONSTRAINT "PK_Clientes" PRIMARY KEY AUTOINCREMENT,
    "Nome" TEXT NOT NULL,
    "Email" TEXT NOT NULL,
    "CPF" TEXT NOT NULL,
    "DataNascimento" TEXT NOT NULL,
    "PerfilAtual" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL
);
2025-11-14 15:17:40.145 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Produtos" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Produtos" PRIMARY KEY,
    "Nome" TEXT NOT NULL,
    "Tipo" INTEGER NOT NULL,
    "Rentabilidade" TEXT NOT NULL,
    "Risco" INTEGER NOT NULL,
    "PrazoMinimoDias" INTEGER NOT NULL,
    "ValorMinimoAplicacao" TEXT NOT NULL,
    "PermiteLiquidez" INTEGER NOT NULL,
    "PerfilRecomendado" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL
);
2025-11-14 15:17:40.150 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "PerfisRisco" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_PerfisRisco" PRIMARY KEY,
    "ClienteId" INTEGER NOT NULL,
    "Perfil" INTEGER NOT NULL,
    "Pontuacao" INTEGER NOT NULL,
    "Descricao" TEXT NOT NULL,
    "VolumeInvestimentos" TEXT NOT NULL,
    "FrequenciaMovimentacoes" INTEGER NOT NULL,
    "PrefereLiquidez" INTEGER NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_PerfisRisco_Clientes_ClienteId" FOREIGN KEY ("ClienteId") REFERENCES "Clientes" ("Id") ON DELETE CASCADE
);
2025-11-14 15:17:40.154 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Simulacoes" (
    "Id" TEXT NOT NULL CONSTRAINT "PK_Simulacoes" PRIMARY KEY,
    "ClienteId" INTEGER NOT NULL,
    "ProdutoId" TEXT NOT NULL,
    "ValorInvestido" TEXT NOT NULL,
    "ValorFinal" TEXT NOT NULL,
    "PrazoMeses" INTEGER NOT NULL,
    "DataSimulacao" TEXT NOT NULL,
    "RentabilidadeCalculada" TEXT NOT NULL,
    "CreatedAt" TEXT NOT NULL,
    "UpdatedAt" TEXT NULL,
    "IsDeleted" INTEGER NOT NULL,
    CONSTRAINT "FK_Simulacoes_Clientes_ClienteId" FOREIGN KEY ("ClienteId") REFERENCES "Clientes" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Simulacoes_Produtos_ProdutoId" FOREIGN KEY ("ProdutoId") REFERENCES "Produtos" ("Id") ON DELETE RESTRICT
);
2025-11-14 15:17:40.166 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES ('182A3CD4-503E-4CA9-9B80-C254B9361B67', '2025-11-14 18:17:39.9850226', 0, 'LCI Plus', 1, 0, 90, '0.11', 1, 2, NULL, '5000.0');
SELECT changes();

INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES ('271AE85D-AA25-4B21-8E44-CA7FED33B8F5', '2025-11-14 18:17:39.9850222', 0, 'CDB Caixa 2026', 1, 1, 180, '0.12', 1, 1, NULL, '1000.0');
SELECT changes();

INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES ('D307BA0E-CCA7-4125-8933-28A5214D14C1', '2025-11-14 18:17:39.9850227', 0, 'Fundo Multimercado XPTO', 3, 1, 0, '0.18', 3, 5, NULL, '500.0');
SELECT changes();
2025-11-14 15:17:40.170 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Clientes_CPF" ON "Clientes" ("CPF");
2025-11-14 15:17:40.175 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_Clientes_Email" ON "Clientes" ("Email");
2025-11-14 15:17:40.182 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_PerfisRisco_ClienteId" ON "PerfisRisco" ("ClienteId");
2025-11-14 15:17:40.186 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_PerfisRisco_Perfil" ON "PerfisRisco" ("Perfil");
2025-11-14 15:17:40.189 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Produtos_PerfilRecomendado" ON "Produtos" ("PerfilRecomendado");
2025-11-14 15:17:40.191 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Produtos_Tipo" ON "Produtos" ("Tipo");
2025-11-14 15:17:40.194 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Simulacoes_ClienteId" ON "Simulacoes" ("ClienteId");
2025-11-14 15:17:40.197 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Simulacoes_DataSimulacao" ON "Simulacoes" ("DataSimulacao");
2025-11-14 15:17:40.199 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Simulacoes_ProdutoId" ON "Simulacoes" ("ProdutoId");
2025-11-14 15:17:40.424 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-14 15:17:40.434 -03:00 [INF] Seeding database with initial data...
2025-11-14 15:17:40.667 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (Size = 11), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 13), @p4='?' (DbType = Boolean), @p5='?' (Size = 10), @p6='?' (DbType = Int32), @p7='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Clientes" ("CPF", "CreatedAt", "DataNascimento", "Email", "IsDeleted", "Nome", "PerfilAtual", "UpdatedAt")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7)
RETURNING "Id";
2025-11-14 15:17:40.692 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 8), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-14 15:17:40.695 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 18), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-14 15:17:40.699 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 14), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-14 15:17:40.702 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 18), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-14 15:17:40.706 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p3='?' (Size = 19), @p4='?' (DbType = Int32), @p5='?' (DbType = Boolean), @p6='?' (DbType = Int32), @p7='?' (DbType = Decimal), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = DateTime), @p11='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Produtos" ("Id", "CreatedAt", "IsDeleted", "Nome", "PerfilRecomendado", "PermiteLiquidez", "PrazoMinimoDias", "Rentabilidade", "Risco", "Tipo", "UpdatedAt", "ValorMinimoAplicacao")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11);
2025-11-14 15:17:40.727 -03:00 [INF] Database seeded successfully with 5 products and 1 client
2025-11-14 15:23:51.020 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-14 15:23:51.256 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-14 15:25:52.157 -03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-14 15:25:52.402 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-14 15:25:52.616 -03:00 [INF] Application started successfully
2025-11-14 15:25:52.676 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-14 15:25:52.748 -03:00 [INF] Creating key {ebee54da-75dd-40f6-962f-0e386165790d} with creation date 2025-11-14 18:25:52Z, activation date 2025-11-14 18:25:52Z, and expiration date 2026-02-12 18:25:52Z.
2025-11-14 15:25:52.766 -03:00 [INF] Writing data to file 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys\key-ebee54da-75dd-40f6-962f-0e386165790d.xml'.
2025-11-14 15:25:53.034 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-14 15:25:53.035 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-14 15:25:53.107 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-14 15:25:53.108 -03:00 [INF] Hosting environment: Development
2025-11-14 15:25:53.109 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-14 15:26:14.586 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/ - null null
2025-11-14 15:26:14.906 -03:00 [INF] Request GET / completado em 0ms com status 404
2025-11-14 15:26:14.910 -03:00 [INF] HTTP GET / responded 404 in 102.1771 ms
2025-11-14 15:26:14.917 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/ - 404 0 null 341.3877ms
2025-11-14 15:26:14.929 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7148/, Response status code: 404
2025-11-14 15:26:22.148 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger - null null
2025-11-14 15:26:22.159 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger - 301 0 null 10.4821ms
2025-11-14 15:26:22.168 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/index.html - null null
2025-11-14 15:26:22.333 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/index.html - 200 null text/html;charset=utf-8 165.7063ms
2025-11-14 15:26:22.409 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/swagger-ui.css - null null
2025-11-14 15:26:22.409 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/index.css - null null
2025-11-14 15:26:22.414 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/swagger-ui-bundle.js - null null
2025-11-14 15:26:22.459 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/index.js - null null
2025-11-14 15:26:22.458 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/swagger-ui-standalone-preset.js - null null
2025-11-14 15:26:22.486 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/index.js - 200 null application/javascript;charset=utf-8 27.2427ms
2025-11-14 15:26:22.467 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - null null
2025-11-14 15:26:22.475 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_vs/browserLink - null null
2025-11-14 15:26:22.519 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/index.css - 200 152 text/css 110.2391ms
2025-11-14 15:26:22.536 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 68.9782ms
2025-11-14 15:26:22.538 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/swagger-ui-standalone-preset.js - 200 77354 text/javascript 79.5677ms
2025-11-14 15:26:22.538 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/swagger-ui-bundle.js - 200 424834 text/javascript 128.073ms
2025-11-14 15:26:22.538 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/swagger-ui.css - 200 23649 text/css 129.0253ms
2025-11-14 15:26:22.794 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_vs/browserLink - 200 null text/javascript; charset=UTF-8 319.1166ms
2025-11-14 15:26:22.861 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - null null
2025-11-14 15:26:22.879 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/favicon-32x32.png - null null
2025-11-14 15:26:22.887 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/favicon-32x32.png - 200 628 image/png 7.7802ms
2025-11-14 15:26:22.898 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.9728ms
2025-11-14 15:26:55.030 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 52
2025-11-14 15:26:55.086 -03:00 [INF] CORS policy execution successful.
2025-11-14 15:26:55.089 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 15:26:55.115 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-14 15:26:55.185 -03:00 [INF] Tentativa de login para usuário admin
2025-11-14 15:26:55.187 -03:00 [INF] Processando login para usuário admin
2025-11-14 15:26:55.188 -03:00 [WRN] Falha de autenticação para usuário admin
2025-11-14 15:26:55.189 -03:00 [WRN] Falha no login para usuário admin
2025-11-14 15:26:55.195 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-11-14 15:26:55.210 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 89.6428ms
2025-11-14 15:26:55.212 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 15:26:55.213 -03:00 [INF] Request POST /api/Auth/login completado em 124ms com status 401
2025-11-14 15:26:55.215 -03:00 [INF] HTTP POST /api/Auth/login responded 401 in 171.2699 ms
2025-11-14 15:26:55.218 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 401 null application/problem+json; charset=utf-8 187.8652ms
2025-11-14 15:27:01.717 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 52
2025-11-14 15:27:01.727 -03:00 [INF] CORS policy execution successful.
2025-11-14 15:27:01.729 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 15:27:01.732 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-14 15:27:01.736 -03:00 [INF] Tentativa de login para usuário admin
2025-11-14 15:27:01.738 -03:00 [INF] Processando login para usuário admin
2025-11-14 15:27:01.739 -03:00 [WRN] Falha de autenticação para usuário admin
2025-11-14 15:27:01.741 -03:00 [WRN] Falha no login para usuário admin
2025-11-14 15:27:01.743 -03:00 [INF] Executing UnauthorizedObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ProblemDetails'.
2025-11-14 15:27:01.745 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 10.9347ms
2025-11-14 15:27:01.747 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 15:27:01.749 -03:00 [INF] Request POST /api/Auth/login completado em 18ms com status 401
2025-11-14 15:27:01.751 -03:00 [INF] HTTP POST /api/Auth/login responded 401 in 26.1360 ms
2025-11-14 15:27:01.752 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 401 null application/problem+json; charset=utf-8 35.2054ms
2025-11-14 15:27:14.564 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 52
2025-11-14 15:27:14.568 -03:00 [INF] CORS policy execution successful.
2025-11-14 15:27:14.569 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 15:27:14.571 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-14 15:27:14.576 -03:00 [INF] Tentativa de login para usuário admin
2025-11-14 15:27:14.577 -03:00 [INF] Processando login para usuário admin
2025-11-14 15:27:14.619 -03:00 [INF] Login bem-sucedido para usuário admin
2025-11-14 15:27:14.622 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.LoginResponse'.
2025-11-14 15:27:14.630 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 56.2759ms
2025-11-14 15:27:14.632 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 15:27:14.633 -03:00 [INF] Request POST /api/Auth/login completado em 63ms com status 200
2025-11-14 15:27:14.635 -03:00 [INF] HTTP POST /api/Auth/login responded 200 in 67.1475 ms
2025-11-14 15:27:14.637 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 200 null application/json; charset=utf-8 73.11ms
2025-11-14 15:27:26.311 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/perfil-risco/1 - null null
2025-11-14 15:27:26.319 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-14 15:27:26.323 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-14 15:27:26.325 -03:00 [INF] HTTP GET /api/perfil-risco/1 responded 401 in 10.3003 ms
2025-11-14 15:27:26.327 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/perfil-risco/1 - 401 0 null 15.9156ms
2025-11-14 18:06:49.958 -03:00 [INF] Executed DbCommand (28ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-14 18:06:50.522 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-14 18:06:50.959 -03:00 [INF] Application started successfully
2025-11-14 18:06:51.044 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-14 18:06:51.582 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-14 18:06:51.585 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-14 18:06:52.026 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-14 18:06:52.029 -03:00 [INF] Hosting environment: Development
2025-11-14 18:06:52.032 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-14 18:07:08.731 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/ - null null
2025-11-14 18:07:09.295 -03:00 [INF] Request GET / completado em 0ms com status 404
2025-11-14 18:07:09.304 -03:00 [INF] HTTP GET / responded 404 in 184.3998 ms
2025-11-14 18:07:09.326 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/ - 404 0 null 608.2578ms
2025-11-14 18:07:09.340 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7148/, Response status code: 404
2025-11-14 18:07:20.037 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - null null
2025-11-14 18:07:20.072 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 35.1119ms
2025-11-14 18:07:20.078 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_vs/browserLink - null null
2025-11-14 18:07:20.236 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_vs/browserLink - 200 null text/javascript; charset=UTF-8 158.4639ms
2025-11-14 18:07:20.578 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - null null
2025-11-14 18:07:20.637 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 58.8099ms
2025-11-14 18:07:38.857 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-14&dataFim=2025-11-14 - null null
2025-11-14 18:07:38.890 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-14 18:07:38.901 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-14 18:07:38.904 -03:00 [INF] HTTP GET /api/Telemetria responded 401 in 30.1265 ms
2025-11-14 18:07:38.908 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-14&dataFim=2025-11-14 - 401 0 null 50.3258ms
2025-11-14 18:08:10.320 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 52
2025-11-14 18:08:10.375 -03:00 [INF] CORS policy execution successful.
2025-11-14 18:08:10.382 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 18:08:10.424 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-14 18:08:10.531 -03:00 [INF] Tentativa de login para usuário admin
2025-11-14 18:08:10.536 -03:00 [INF] Processando login para usuário admin
2025-11-14 18:08:10.604 -03:00 [INF] Login bem-sucedido para usuário admin
2025-11-14 18:08:10.617 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.LoginResponse'.
2025-11-14 18:08:10.642 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 206.123ms
2025-11-14 18:08:10.646 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 18:08:10.650 -03:00 [INF] Request POST /api/Auth/login completado em 270ms com status 200
2025-11-14 18:08:10.654 -03:00 [INF] HTTP POST /api/Auth/login responded 200 in 309.6239 ms
2025-11-14 18:08:10.659 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 200 null application/json; charset=utf-8 338.7413ms
2025-11-14 18:08:30.126 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-14&dataFim=2025-11-14 - null null
2025-11-14 18:08:30.149 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-14 18:08:30.151 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-14 18:08:30.154 -03:00 [INF] HTTP GET /api/Telemetria responded 401 in 6.5215 ms
2025-11-14 18:08:30.157 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-14&dataFim=2025-11-14 - 401 0 null 31.0459ms
2025-11-14 18:08:34.144 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-14&dataFim=2025-11-14 - null null
2025-11-14 18:08:34.154 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-14 18:08:34.157 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-14 18:08:34.159 -03:00 [INF] HTTP GET /api/Telemetria responded 401 in 7.5734 ms
2025-11-14 18:08:34.164 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-14&dataFim=2025-11-14 - 401 0 null 19.0666ms
2025-11-14 18:36:06.577 -03:00 [INF] Executed DbCommand (50ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-14 18:36:07.068 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-14 18:36:07.321 -03:00 [INF] Application started successfully
2025-11-14 18:36:07.392 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-14 18:36:07.876 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-14 18:36:07.880 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-14 18:36:08.298 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-14 18:36:08.302 -03:00 [INF] Hosting environment: Development
2025-11-14 18:36:08.305 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-14 18:36:42.491 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/ - null null
2025-11-14 18:36:42.871 -03:00 [INF] Request GET / completado em 0ms com status 404
2025-11-14 18:36:42.880 -03:00 [INF] HTTP GET / responded 404 in 133.3353 ms
2025-11-14 18:36:42.897 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/ - 404 0 null 413.9525ms
2025-11-14 18:36:42.910 -03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7148/, Response status code: 404
2025-11-14 18:36:49.434 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - null null
2025-11-14 18:36:49.445 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_vs/browserLink - null null
2025-11-14 18:36:49.520 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 86.7437ms
2025-11-14 18:36:49.571 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_vs/browserLink - 200 null text/javascript; charset=UTF-8 126.8107ms
2025-11-14 18:36:49.804 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - null null
2025-11-14 18:36:49.852 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 48.9214ms
2025-11-14 18:37:17.679 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 52
2025-11-14 18:37:17.798 -03:00 [INF] CORS policy execution successful.
2025-11-14 18:37:17.804 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 18:37:17.843 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-14 18:37:17.929 -03:00 [INF] Tentativa de login para usuário admin
2025-11-14 18:37:17.935 -03:00 [INF] Processando login para usuário admin
2025-11-14 18:37:17.996 -03:00 [INF] Login bem-sucedido para usuário admin
2025-11-14 18:37:18.016 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.LoginResponse'.
2025-11-14 18:37:18.049 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 193.9974ms
2025-11-14 18:37:18.054 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 18:37:18.057 -03:00 [INF] Request POST /api/Auth/login completado em 254ms com status 200
2025-11-14 18:37:18.062 -03:00 [INF] HTTP POST /api/Auth/login responded 200 in 336.4114 ms
2025-11-14 18:37:18.068 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 200 null application/json; charset=utf-8 389.424ms
2025-11-14 18:37:51.266 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-14&dataFim=2025-11-14 - null null
2025-11-14 18:37:51.290 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-14 18:37:51.301 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-14 18:37:51.304 -03:00 [INF] HTTP GET /api/Telemetria responded 401 in 27.8688 ms
2025-11-14 18:37:51.308 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-14&dataFim=2025-11-14 - 401 0 null 42.1572ms
2025-11-14 23:41:32.695 -03:00 [INF] Executed DbCommand (23ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-14 23:41:33.153 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-14 23:41:33.472 -03:00 [INF] Application started successfully
2025-11-14 23:41:33.563 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-14 23:41:34.005 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-14 23:41:34.009 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-14 23:41:34.397 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-14 23:41:34.410 -03:00 [INF] Hosting environment: Development
2025-11-14 23:41:34.412 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-14 23:41:47.021 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_vs/browserLink - null null
2025-11-14 23:41:47.021 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - null null
2025-11-14 23:41:47.124 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 115.2ms
2025-11-14 23:41:47.195 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_vs/browserLink - 200 null text/javascript; charset=UTF-8 188.7552ms
2025-11-14 23:41:47.285 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - null null
2025-11-14 23:41:47.405 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 120.6706ms
2025-11-14 23:42:02.799 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 52
2025-11-14 23:42:03.007 -03:00 [INF] CORS policy execution successful.
2025-11-14 23:42:03.018 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 23:42:03.062 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-14 23:42:03.172 -03:00 [INF] Tentativa de login para usuário admin
2025-11-14 23:42:03.176 -03:00 [INF] Processando login para usuário admin
2025-11-14 23:42:03.235 -03:00 [INF] Login bem-sucedido para usuário admin
2025-11-14 23:42:03.249 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.LoginResponse'.
2025-11-14 23:42:03.282 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 206.761ms
2025-11-14 23:42:03.288 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 23:42:03.294 -03:00 [INF] Request POST /api/Auth/login completado em 276ms com status 200
2025-11-14 23:42:03.303 -03:00 [INF] HTTP POST /api/Auth/login responded 200 in 445.8658 ms
2025-11-14 23:42:03.312 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 200 null application/json; charset=utf-8 512.7638ms
2025-11-14 23:42:49.260 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-14&dataFim=2025-11-14 - null null
2025-11-14 23:42:49.293 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-14 23:42:49.304 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-14 23:42:49.307 -03:00 [INF] HTTP GET /api/Telemetria responded 401 in 25.5568 ms
2025-11-14 23:42:49.313 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria?dataInicio=2025-11-14&dataFim=2025-11-14 - 401 0 null 53.0452ms
2025-11-14 23:47:26.595 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-14 23:47:27.036 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-14 23:47:27.292 -03:00 [INF] Application started successfully
2025-11-14 23:47:27.352 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-14 23:47:27.808 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-14 23:47:27.811 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-14 23:47:28.225 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-14 23:47:28.228 -03:00 [INF] Hosting environment: Development
2025-11-14 23:47:28.230 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-14 23:47:49.456 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - null null
2025-11-14 23:47:49.456 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_vs/browserLink - null null
2025-11-14 23:47:49.552 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 107.0547ms
2025-11-14 23:47:49.634 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_vs/browserLink - 200 null text/javascript; charset=UTF-8 191.7242ms
2025-11-14 23:47:49.757 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - null null
2025-11-14 23:47:49.839 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 91.1618ms
2025-11-14 23:48:16.729 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria - null null
2025-11-14 23:48:16.969 -03:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-11-14 23:48:17.031 -03:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-11-14 23:48:17.048 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-14 23:48:17.061 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-14 23:48:17.069 -03:00 [INF] HTTP GET /api/Telemetria responded 401 in 277.2080 ms
2025-11-14 23:48:17.077 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria - 401 0 null 348.1547ms
2025-11-14 23:48:51.912 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 52
2025-11-14 23:48:52.066 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-14 23:48:52.076 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2025-11-14 23:48:52.084 -03:00 [INF] CORS policy execution successful.
2025-11-14 23:48:52.095 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 23:48:52.144 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-14 23:48:52.228 -03:00 [INF] Tentativa de login para usuário admin
2025-11-14 23:48:52.233 -03:00 [INF] Processando login para usuário admin
2025-11-14 23:48:52.253 -03:00 [INF] Login bem-sucedido para usuário admin
2025-11-14 23:48:52.263 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.LoginResponse'.
2025-11-14 23:48:52.287 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 131.1512ms
2025-11-14 23:48:52.292 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 23:48:52.297 -03:00 [INF] Request POST /api/Auth/login completado em 203ms com status 200
2025-11-14 23:48:52.303 -03:00 [INF] HTTP POST /api/Auth/login responded 200 in 350.0387 ms
2025-11-14 23:48:52.309 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 200 null application/json; charset=utf-8 396.8237ms
2025-11-14 23:49:15.906 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria - null null
2025-11-14 23:49:15.925 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-14 23:49:15.931 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2025-11-14 23:49:15.936 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-14 23:49:15.940 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-14 23:49:15.943 -03:00 [INF] HTTP GET /api/Telemetria responded 401 in 21.0173 ms
2025-11-14 23:49:15.950 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria - 401 0 null 44.75ms
2025-11-14 23:49:31.144 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria - null null
2025-11-14 23:49:31.153 -03:00 [INF] Failed to validate the token.
System.ArgumentException: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
 ---> System.FormatException: IDX10400: Unable to decode: '[PII of type 'System.String' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64url encoded string.
   at Microsoft.IdentityModel.Tokens.Base64UrlEncoder.Decode(ReadOnlySpan`1 strSpan, Span`1 output)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.CreateClaimSet(ReadOnlySpan`1 strSpan, Int32 startIndex, Int32 length, Boolean createHeaderClaimSet)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   --- End of inner exception stack trace ---
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken.ReadToken(ReadOnlyMemory`1 encodedTokenMemory)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebToken..ctor(String jwtEncodedString, TryReadJwtClaim tryReadJwtClaim)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ReadToken(String token, TokenValidationParameters validationParameters)
2025-11-14 23:49:31.160 -03:00 [INF] Bearer was not authenticated. Failure message: IDX14102: Unable to decode the header '[PII of type 'Microsoft.IdentityModel.Logging.SecurityArtifact' is hidden. For more details, see https://aka.ms/IdentityModel/PII.]' as Base64Url encoded string.
2025-11-14 23:49:31.189 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-14 23:49:31.193 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-14 23:49:31.197 -03:00 [INF] HTTP GET /api/Telemetria responded 401 in 45.3368 ms
2025-11-14 23:49:31.203 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria - 401 0 null 59.0565ms
2025-11-14 23:50:34.487 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria - null null
2025-11-14 23:50:34.505 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenInvalidAudienceException: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateAudience(IEnumerable`1 audiences, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-11-14 23:50:34.511 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10208: Unable to validate audience. validationParameters.ValidAudience is null or whitespace and validationParameters.ValidAudiences is null.
2025-11-14 23:50:34.514 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-11-14 23:50:34.517 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2025-11-14 23:50:34.519 -03:00 [INF] HTTP GET /api/Telemetria responded 401 in 15.6345 ms
2025-11-14 23:50:34.524 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria - 401 0 null 37.0804ms
2025-11-14 23:53:17.868 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*) FROM "sqlite_master" WHERE "type" = 'table' AND "rootpage" IS NOT NULL;
2025-11-14 23:53:18.346 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1
    FROM "Clientes" AS "c"
    WHERE NOT ("c"."IsDeleted"))
2025-11-14 23:53:18.645 -03:00 [INF] Application started successfully
2025-11-14 23:53:18.725 -03:00 [INF] User profile is available. Using 'C:\Users\lisbi\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-11-14 23:53:19.156 -03:00 [INF] Now listening on: https://localhost:7148
2025-11-14 23:53:19.159 -03:00 [INF] Now listening on: http://localhost:5199
2025-11-14 23:53:19.579 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-11-14 23:53:19.581 -03:00 [INF] Hosting environment: Development
2025-11-14 23:53:19.583 -03:00 [INF] Content root path: C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API
2025-11-14 23:53:31.872 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_vs/browserLink - null null
2025-11-14 23:53:31.872 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - null null
2025-11-14 23:53:32.015 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_framework/aspnetcore-browser-refresh.js - 200 16515 application/javascript; charset=utf-8 154.1402ms
2025-11-14 23:53:32.073 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/_vs/browserLink - 200 null text/javascript; charset=UTF-8 214.2066ms
2025-11-14 23:53:32.154 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - null null
2025-11-14 23:53:32.275 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 121.4245ms
2025-11-14 23:53:52.962 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Auth/login - application/json 52
2025-11-14 23:53:53.161 -03:00 [INF] CORS policy execution successful.
2025-11-14 23:53:53.171 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 23:53:53.223 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.LoginResponse]] Login(InvestCaixa.Application.DTOs.Request.LoginRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.AuthController (InvestCaixa.API).
2025-11-14 23:53:53.343 -03:00 [INF] Tentativa de login para usuário admin
2025-11-14 23:53:53.347 -03:00 [INF] Processando login para usuário admin
2025-11-14 23:53:53.430 -03:00 [INF] Login bem-sucedido para usuário admin
2025-11-14 23:53:53.446 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.LoginResponse'.
2025-11-14 23:53:53.476 -03:00 [INF] Executed action InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API) in 215.7354ms
2025-11-14 23:53:53.481 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.AuthController.Login (InvestCaixa.API)'
2025-11-14 23:53:53.488 -03:00 [INF] Request POST /api/Auth/login completado em 315ms com status 200
2025-11-14 23:53:53.497 -03:00 [INF] HTTP POST /api/Auth/login responded 200 in 473.2035 ms
2025-11-14 23:53:53.506 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Auth/login - 200 null application/json; charset=utf-8 544.8366ms
2025-11-14 23:54:13.677 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7148/api/Telemetria - null null
2025-11-14 23:54:13.808 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.TelemetriaController.ObterTelemetria (InvestCaixa.API)'
2025-11-14 23:54:13.821 -03:00 [INF] Route matched with {action = "ObterTelemetria", controller = "Telemetria"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.TelemetriaResponse]] ObterTelemetria(System.Nullable`1[System.DateTime], System.Nullable`1[System.DateTime], System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.TelemetriaController (InvestCaixa.API).
2025-11-14 23:54:13.833 -03:00 [INF] Obtendo dados de telemetria
2025-11-14 23:54:13.837 -03:00 [INF] Obtendo dados de telemetria
2025-11-14 23:54:13.842 -03:00 [INF] Executing OkObjectResult, writing value of type 'InvestCaixa.Application.DTOs.Response.TelemetriaResponse'.
2025-11-14 23:54:13.865 -03:00 [INF] Executed action InvestCaixa.API.Controllers.TelemetriaController.ObterTelemetria (InvestCaixa.API) in 37.3733ms
2025-11-14 23:54:13.869 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.TelemetriaController.ObterTelemetria (InvestCaixa.API)'
2025-11-14 23:54:13.871 -03:00 [INF] Request GET /api/Telemetria completado em 63ms com status 200
2025-11-14 23:54:13.876 -03:00 [INF] HTTP GET /api/Telemetria responded 200 in 173.3186 ms
2025-11-14 23:54:13.882 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7148/api/Telemetria - 200 null application/json; charset=utf-8 204.8106ms
2025-11-14 23:56:42.010 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 84
2025-11-14 23:56:42.038 -03:00 [INF] CORS policy execution successful.
2025-11-14 23:56:42.041 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-14 23:56:42.052 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-14 23:56:42.268 -03:00 [WRN] You do not have a valid license key for the Lucky Penny software AutoMapper. This is allowed for development and testing scenarios. If you are running in production you are required to have a licensed version. Please visit https://luckypennysoftware.com to obtain a valid license.
2025-11-14 23:56:42.350 -03:00 [INF] Recebida requisição de simulação para cliente 123
2025-11-14 23:56:42.357 -03:00 [INF] Iniciando simulação para cliente 123 com valor 50000
2025-11-14 23:56:42.630 -03:00 [INF] Executed DbCommand (12ms) [Parameters=[@__tipoProduto_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
FROM "Produtos" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."Tipo" = @__tipoProduto_0
LIMIT 1
2025-11-14 23:56:43.028 -03:00 [ERR] Failed executing DbCommand (12ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Guid), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Simulacoes" ("Id", "ClienteId", "CreatedAt", "DataSimulacao", "IsDeleted", "PrazoMeses", "ProdutoId", "RentabilidadeCalculada", "UpdatedAt", "ValorFinal", "ValorInvestido")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-14 23:56:43.092 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'InvestCaixa.Infrastructure.Data.InvestimentoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-14 23:56:57.423 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API) in 15366.3935ms
2025-11-14 23:56:57.429 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-14 23:56:57.459 -03:00 [INF] Request POST /api/Simulacao/simular-investimento completado em 15417ms com status 200
2025-11-14 23:56:57.493 -03:00 [ERR] HTTP POST /api/Simulacao/simular-investimento responded 500 in 15462.4690 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync(CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\UnitOfWork.cs:line 29
   at InvestCaixa.Application.Services.SimulacaoService.SimularInvestimentoAsync(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 59
   at InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 38
   at lambda_method41(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
2025-11-14 23:57:01.731 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync(CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\UnitOfWork.cs:line 29
   at InvestCaixa.Application.Services.SimulacaoService.SimularInvestimentoAsync(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 59
   at InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 38
   at lambda_method41(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-14 23:57:01.783 -03:00 [ERR] Ocorreu uma exceção: An error occurred while saving the entity changes. See the inner exception for details.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync(CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\UnitOfWork.cs:line 29
   at InvestCaixa.Application.Services.SimulacaoService.SimularInvestimentoAsync(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 59
   at InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 38
   at lambda_method41(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
   at Microsoft.AspNetCore.Diagnostics.ExceptionHandlerMiddlewareImpl.<Invoke>g__Awaited|10_0(ExceptionHandlerMiddlewareImpl middleware, HttpContext context, Task task)
2025-11-14 23:57:01.843 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - 500 null application/json; charset=utf-8 19833.689ms
2025-11-14 23:57:19.244 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7148/api/Simulacao/simular-investimento - application/json 84
2025-11-14 23:57:19.255 -03:00 [INF] CORS policy execution successful.
2025-11-14 23:57:19.258 -03:00 [INF] Executing endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-14 23:57:19.260 -03:00 [INF] Route matched with {action = "SimularInvestimento", controller = "Simulacao"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[InvestCaixa.Application.DTOs.Response.SimulacaoResponse]] SimularInvestimento(InvestCaixa.Application.DTOs.Request.SimularInvestimentoRequest, System.Threading.CancellationToken) on controller InvestCaixa.API.Controllers.SimulacaoController (InvestCaixa.API).
2025-11-14 23:57:19.271 -03:00 [INF] Recebida requisição de simulação para cliente 123
2025-11-14 23:57:19.274 -03:00 [INF] Iniciando simulação para cliente 123 com valor 50000
2025-11-14 23:57:19.398 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[@__tipoProduto_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT "p"."Id", "p"."CreatedAt", "p"."IsDeleted", "p"."Nome", "p"."PerfilRecomendado", "p"."PermiteLiquidez", "p"."PrazoMinimoDias", "p"."Rentabilidade", "p"."Risco", "p"."Tipo", "p"."UpdatedAt", "p"."ValorMinimoAplicacao"
FROM "Produtos" AS "p"
WHERE NOT ("p"."IsDeleted") AND "p"."Tipo" = @__tipoProduto_0
LIMIT 1
2025-11-14 23:57:19.409 -03:00 [ERR] Failed executing DbCommand (2ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Int32), @p2='?' (DbType = DateTime), @p3='?' (DbType = DateTime), @p4='?' (DbType = Boolean), @p5='?' (DbType = Int32), @p6='?' (DbType = Guid), @p7='?' (DbType = Decimal), @p8='?' (DbType = DateTime), @p9='?' (DbType = Decimal), @p10='?' (DbType = Decimal)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "Simulacoes" ("Id", "ClienteId", "CreatedAt", "DataSimulacao", "IsDeleted", "PrazoMeses", "ProdutoId", "RentabilidadeCalculada", "UpdatedAt", "ValorFinal", "ValorInvestido")
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10);
2025-11-14 23:57:19.419 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'InvestCaixa.Infrastructure.Data.InvestimentoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-11-14 23:57:53.381 -03:00 [INF] Executed action InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API) in 34115.8854ms
2025-11-14 23:57:53.385 -03:00 [INF] Executed endpoint 'InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento (InvestCaixa.API)'
2025-11-14 23:57:53.415 -03:00 [INF] Request POST /api/Simulacao/simular-investimento completado em 34156ms com status 200
2025-11-14 23:57:53.450 -03:00 [ERR] HTTP POST /api/Simulacao/simular-investimento responded 500 in 34197.8517 ms
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.Sqlite.SqliteException (0x80004005): SQLite Error 19: 'FOREIGN KEY constraint failed'.
   at Microsoft.Data.Sqlite.SqliteException.ThrowExceptionForRC(Int32 rc, sqlite3 db)
   at Microsoft.Data.Sqlite.SqliteDataReader.NextResult()
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReader(CommandBehavior behavior)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.Data.Sqlite.SqliteCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at InvestCaixa.Infrastructure.Repositories.UnitOfWork.SaveChangesAsync(CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Infrastructure\Repositories\UnitOfWork.cs:line 29
   at InvestCaixa.Application.Services.SimulacaoService.SimularInvestimentoAsync(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.Application\Services\SimulacaoService.cs:line 59
   at InvestCaixa.API.Controllers.SimulacaoController.SimularInvestimento(SimularInvestimentoRequest request, CancellationToken cancellationToken) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Controllers\SimulacaoController.cs:line 38
   at lambda_method41(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at InvestCaixa.API.Middlewares.TelemetriaMiddleware.InvokeAsync(HttpContext context, ITelemetriaService telemetriaService) in C:\Desenvolvimento\CSharp\InvesteCaixa\src\InvestCaixa.API\Middlewares\TelemetriaMiddleware.cs:line 26
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Serilog.AspNetCore.RequestLoggingMiddleware.Invoke(HttpContext httpContext)
